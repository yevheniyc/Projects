
if(typeof jQuery!='undefined'){console.info("Software Version: jQuery "+jQuery.fn.jquery);console.info("Software Version: Bootstrap "+$.fn.modal.Constructor.VERSION);$(document).ready(function(){if(jQuery){if(jQuery.ui){console.warn("WARNING: jQuery UI is being deprecated!\nSoftware Version: jQuery UI "+jQuery.ui.version);}}
if(typeof Jmol!='undefined'){if(typeof Jmol.___JmolVersion!='undefined'){console.info("Software Version: JSmol "+Jmol.___JmolVersion)}}});}else{console.error("No jQuery loaded!");document.getElementById("UnsupportedBrowser").className="hidden-print";};
/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options=$.extend({},options);options.expires=-1;}var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires='; expires='+date.toUTCString();}var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}};
/*
 * jQuery Cycle Plugin (with Transition Definitions)
 * Examples and documentation at: http://jquery.malsup.com/cycle/
 * Copyright (c) 2007-2009 M. Alsup
 * Version: 2.74 (03-FEB-2010)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Requires: jQuery v1.2.6 or later
 */
(function($){var ver="2.74";if($.support==undefined){$.support={opacity:!($.browser.msie)};}function debug(s){if($.fn.cycle.debug){log(s);}}function log(){if(window.console&&window.console.log){window.console.log("[cycle] "+Array.prototype.join.call(arguments," "));}}$.fn.cycle=function(options,arg2){var o={s:this.selector,c:this.context};if(this.length===0&&options!="stop"){if(!$.isReady&&o.s){log("DOM not ready, queuing slideshow");$(function(){$(o.s,o.c).cycle(options,arg2);});return this;}log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)"));return this;}return this.each(function(){var opts=handleArguments(this,options,arg2);if(opts===false){return;}if(this.cycleTimeout){clearTimeout(this.cycleTimeout);}this.cycleTimeout=this.cyclePause=0;var $cont=$(this);var $slides=opts.slideExpr?$(opts.slideExpr,this):$cont.children();var els=$slides.get();if(els.length<2){log("terminating; too few slides: "+els.length);return;}var opts2=buildOptions($cont,$slides,els,opts,o);if(opts2===false){return;}var startTime=opts2.continuous?10:getTimeout(opts2.currSlide,opts2.nextSlide,opts2,!opts2.rev);if(startTime){startTime+=(opts2.delay||0);if(startTime<10){startTime=10;}debug("first timeout: "+startTime);this.cycleTimeout=setTimeout(function(){go(els,opts2,0,!opts2.rev);},startTime);}});};function handleArguments(cont,options,arg2){if(cont.cycleStop==undefined){cont.cycleStop=0;}if(options===undefined||options===null){options={};}if(options.constructor==String){switch(options){case"stop":cont.cycleStop++;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);}cont.cycleTimeout=0;$(cont).removeData("cycle.opts");return false;case"toggle":cont.cyclePause=(cont.cyclePause===1)?0:1;return false;case"pause":cont.cyclePause=1;return false;case"resume":cont.cyclePause=0;if(arg2===true){options=$(cont).data("cycle.opts");if(!options){log("options not found, can not resume");return false;}if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}go(options.elements,options,1,1);}return false;case"prev":case"next":var opts=$(cont).data("cycle.opts");if(!opts){log('options not found, "prev/next" ignored');return false;}$.fn.cycle[options](opts);return false;default:options={fx:options};}return options;}else{if(options.constructor==Number){var num=options;options=$(cont).data("cycle.opts");if(!options){log("options not found, can not advance slide");return false;}if(num<0||num>=options.elements.length){log("invalid slide index: "+num);return false;}options.nextSlide=num;if(cont.cycleTimeout){clearTimeout(cont.cycleTimeout);cont.cycleTimeout=0;}if(typeof arg2=="string"){options.oneTimeFx=arg2;}go(options.elements,options,1,num>=options.currSlide);return false;}}return options;}function removeFilter(el,opts){if(!$.support.opacity&&opts.cleartype&&el.style.filter){try{el.style.removeAttribute("filter");}catch(smother){}}}function buildOptions($cont,$slides,els,options,o){var opts=$.extend({},$.fn.cycle.defaults,options||{},$.metadata?$cont.metadata():$.meta?$cont.data():{});if(opts.autostop){opts.countdown=opts.autostopCount||els.length;}var cont=$cont[0];$cont.data("cycle.opts",opts);opts.$cont=$cont;opts.stopCount=cont.cycleStop;opts.elements=els;opts.before=opts.before?[opts.before]:[];opts.after=opts.after?[opts.after]:[];opts.after.unshift(function(){opts.busy=0;});if(!$.support.opacity&&opts.cleartype){opts.after.push(function(){removeFilter(this,opts);});}if(opts.continuous){opts.after.push(function(){go(els,opts,0,!opts.rev);});}saveOriginalOpts(opts);if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($slides);}if($cont.css("position")=="static"){$cont.css("position","relative");}if(opts.width){$cont.width(opts.width);}if(opts.height&&opts.height!="auto"){$cont.height(opts.height);}if(opts.startingSlide){opts.startingSlide=parseInt(opts.startingSlide);}if(opts.random){opts.randomMap=[];for(var i=0;i<els.length;i++){opts.randomMap.push(i);}opts.randomMap.sort(function(a,b){return Math.random()-0.5;});opts.randomIndex=0;opts.startingSlide=opts.randomMap[0];}else{if(opts.startingSlide>=els.length){opts.startingSlide=0;}}opts.currSlide=opts.startingSlide=opts.startingSlide||0;var first=opts.startingSlide;$slides.css({position:"absolute",top:0,left:0}).hide().each(function(i){var z=first?i>=first?els.length-(i-first):first-i:els.length-i;$(this).css("z-index",z);});$(els[first]).css("opacity",1).show();removeFilter(els[first],opts);if(opts.fit&&opts.width){$slides.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}var reshape=opts.containerResize&&!$cont.innerHeight();if(reshape){var maxw=0,maxh=0;for(var j=0;j<els.length;j++){var $e=$(els[j]),e=$e[0],w=$e.outerWidth(),h=$e.outerHeight();if(!w){w=e.offsetWidth;}if(!h){h=e.offsetHeight;}maxw=w>maxw?w:maxw;maxh=h>maxh?h:maxh;}if(maxw>0&&maxh>0){$cont.css({width:maxw+"px",height:maxh+"px"});}}if(opts.pause){$cont.hover(function(){this.cyclePause++;},function(){this.cyclePause--;});}if(supportMultiTransitions(opts)===false){return false;}var requeue=false;options.requeueAttempts=options.requeueAttempts||0;$slides.each(function(){var $el=$(this);this.cycleH=(opts.fit&&opts.height)?opts.height:$el.height();this.cycleW=(opts.fit&&opts.width)?opts.width:$el.width();if($el.is("img")){var loadingIE=($.browser.msie&&this.cycleW==28&&this.cycleH==30&&!this.complete);var loadingFF=($.browser.mozilla&&this.cycleW==34&&this.cycleH==19&&!this.complete);var loadingOp=($.browser.opera&&((this.cycleW==42&&this.cycleH==19)||(this.cycleW==37&&this.cycleH==17))&&!this.complete);var loadingOther=(this.cycleH==0&&this.cycleW==0&&!this.complete);if(loadingIE||loadingFF||loadingOp||loadingOther){if(o.s&&opts.requeueOnImageNotLoaded&&++options.requeueAttempts<100){log(options.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH);setTimeout(function(){$(o.s,o.c).cycle(options);},opts.requeueTimeout);requeue=true;return false;}else{log("could not determine size of image: "+this.src,this.cycleW,this.cycleH);}}}return true;});if(requeue){return false;}opts.cssBefore=opts.cssBefore||{};opts.animIn=opts.animIn||{};opts.animOut=opts.animOut||{};$slides.not(":eq("+first+")").css(opts.cssBefore);if(opts.cssFirst){$($slides[first]).css(opts.cssFirst);}if(opts.timeout){opts.timeout=parseInt(opts.timeout);if(opts.speed.constructor==String){opts.speed=$.fx.speeds[opts.speed]||parseInt(opts.speed);}if(!opts.sync){opts.speed=opts.speed/2;}while((opts.timeout-opts.speed)<250){opts.timeout+=opts.speed;}}if(opts.easing){opts.easeIn=opts.easeOut=opts.easing;}if(!opts.speedIn){opts.speedIn=opts.speed;}if(!opts.speedOut){opts.speedOut=opts.speed;}opts.slideCount=els.length;opts.currSlide=opts.lastSlide=first;if(opts.random){opts.nextSlide=opts.currSlide;if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{opts.nextSlide=opts.startingSlide>=(els.length-1)?0:opts.startingSlide+1;}if(!opts.multiFx){var init=$.fn.cycle.transitions[opts.fx];if($.isFunction(init)){init($cont,$slides,opts);}else{if(opts.fx!="custom"&&!opts.multiFx){log("unknown transition: "+opts.fx,"; slideshow terminating");return false;}}}var e0=$slides[first];if(opts.before.length){opts.before[0].apply(e0,[e0,e0,opts,true]);}if(opts.after.length>1){opts.after[1].apply(e0,[e0,e0,opts,true]);}if(opts.next){$(opts.next).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?-1:1);});}if(opts.prev){$(opts.prev).bind(opts.prevNextEvent,function(){return advance(opts,opts.rev?1:-1);});}if(opts.pager){buildPager(els,opts);}exposeAddSlide(opts,els);return opts;}function saveOriginalOpts(opts){opts.original={before:[],after:[]};opts.original.cssBefore=$.extend({},opts.cssBefore);opts.original.cssAfter=$.extend({},opts.cssAfter);opts.original.animIn=$.extend({},opts.animIn);opts.original.animOut=$.extend({},opts.animOut);$.each(opts.before,function(){opts.original.before.push(this);});$.each(opts.after,function(){opts.original.after.push(this);});}function supportMultiTransitions(opts){var i,tx,txs=$.fn.cycle.transitions;if(opts.fx.indexOf(",")>0){opts.multiFx=true;opts.fxs=opts.fx.replace(/\s*/g,"").split(",");for(i=0;i<opts.fxs.length;i++){var fx=opts.fxs[i];tx=txs[fx];if(!tx||!txs.hasOwnProperty(fx)||!$.isFunction(tx)){log("discarding unknown transition: ",fx);opts.fxs.splice(i,1);i--;}}if(!opts.fxs.length){log("No valid transitions named; slideshow terminating.");return false;}}else{if(opts.fx=="all"){opts.multiFx=true;opts.fxs=[];for(p in txs){tx=txs[p];if(txs.hasOwnProperty(p)&&$.isFunction(tx)){opts.fxs.push(p);}}}}if(opts.multiFx&&opts.randomizeEffects){var r1=Math.floor(Math.random()*20)+30;for(i=0;i<r1;i++){var r2=Math.floor(Math.random()*opts.fxs.length);opts.fxs.push(opts.fxs.splice(r2,1)[0]);}debug("randomized fx sequence: ",opts.fxs);}return true;}function exposeAddSlide(opts,els){opts.addSlide=function(newSlide,prepend){var $s=$(newSlide),s=$s[0];if(!opts.autostopCount){opts.countdown++;}els[prepend?"unshift":"push"](s);if(opts.els){opts.els[prepend?"unshift":"push"](s);}opts.slideCount=els.length;$s.css("position","absolute");$s[prepend?"prependTo":"appendTo"](opts.$cont);if(prepend){opts.currSlide++;opts.nextSlide++;}if(!$.support.opacity&&opts.cleartype&&!opts.cleartypeNoBg){clearTypeFix($s);}if(opts.fit&&opts.width){$s.width(opts.width);}if(opts.fit&&opts.height&&opts.height!="auto"){$slides.height(opts.height);}s.cycleH=(opts.fit&&opts.height)?opts.height:$s.height();s.cycleW=(opts.fit&&opts.width)?opts.width:$s.width();$s.css(opts.cssBefore);if(opts.pager){$.fn.cycle.createPagerAnchor(els.length-1,s,$(opts.pager),els,opts);}if($.isFunction(opts.onAddSlide)){opts.onAddSlide($s);}else{$s.hide();}};}$.fn.cycle.resetState=function(opts,fx){fx=fx||opts.fx;opts.before=[];opts.after=[];opts.cssBefore=$.extend({},opts.original.cssBefore);opts.cssAfter=$.extend({},opts.original.cssAfter);opts.animIn=$.extend({},opts.original.animIn);opts.animOut=$.extend({},opts.original.animOut);opts.fxFn=null;$.each(opts.original.before,function(){opts.before.push(this);});$.each(opts.original.after,function(){opts.after.push(this);});var init=$.fn.cycle.transitions[fx];if($.isFunction(init)){init(opts.$cont,$(opts.elements),opts);}};function go(els,opts,manual,fwd){if(manual&&opts.busy&&opts.manualTrump){$(els).stop(true,true);opts.busy=false;}if(opts.busy){return;}var p=opts.$cont[0],curr=els[opts.currSlide],next=els[opts.nextSlide];if(p.cycleStop!=opts.stopCount||p.cycleTimeout===0&&!manual){return;}if(!manual&&!p.cyclePause&&((opts.autostop&&(--opts.countdown<=0))||(opts.nowrap&&!opts.random&&opts.nextSlide<opts.currSlide))){if(opts.end){opts.end(opts);}return;}if(manual||!p.cyclePause){var fx=opts.fx;curr.cycleH=curr.cycleH||$(curr).height();curr.cycleW=curr.cycleW||$(curr).width();next.cycleH=next.cycleH||$(next).height();next.cycleW=next.cycleW||$(next).width();if(opts.multiFx){if(opts.lastFx==undefined||++opts.lastFx>=opts.fxs.length){opts.lastFx=0;}fx=opts.fxs[opts.lastFx];opts.currFx=fx;}if(opts.oneTimeFx){fx=opts.oneTimeFx;opts.oneTimeFx=null;}$.fn.cycle.resetState(opts,fx);if(opts.before.length){$.each(opts.before,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});}var after=function(){$.each(opts.after,function(i,o){if(p.cycleStop!=opts.stopCount){return;}o.apply(next,[curr,next,opts,fwd]);});};if(opts.nextSlide!=opts.currSlide){opts.busy=1;if(opts.fxFn){opts.fxFn(curr,next,opts,after,fwd);}else{if($.isFunction($.fn.cycle[opts.fx])){$.fn.cycle[opts.fx](curr,next,opts,after);}else{$.fn.cycle.custom(curr,next,opts,after,manual&&opts.fastOnEvent);}}}opts.lastSlide=opts.currSlide;if(opts.random){opts.currSlide=opts.nextSlide;if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{var roll=(opts.nextSlide+1)==els.length;opts.nextSlide=roll?0:opts.nextSlide+1;opts.currSlide=roll?els.length-1:opts.nextSlide-1;}if(opts.pager){$.fn.cycle.updateActivePagerLink(opts.pager,opts.currSlide);}}var ms=0;if(opts.timeout&&!opts.continuous){ms=getTimeout(curr,next,opts,fwd);}else{if(opts.continuous&&p.cyclePause){ms=10;}}if(ms>0){p.cycleTimeout=setTimeout(function(){go(els,opts,0,!opts.rev);},ms);}}$.fn.cycle.updateActivePagerLink=function(pager,currSlide){$(pager).each(function(){$(this).find("a").removeClass("activeSlide").filter("a:eq("+currSlide+")").addClass("activeSlide");});};function getTimeout(curr,next,opts,fwd){if(opts.timeoutFn){var t=opts.timeoutFn(curr,next,opts,fwd);while((t-opts.speed)<250){t+=opts.speed;}debug("calculated timeout: "+t+"; speed: "+opts.speed);if(t!==false){return t;}}return opts.timeout;}$.fn.cycle.next=function(opts){advance(opts,opts.rev?-1:1);};$.fn.cycle.prev=function(opts){advance(opts,opts.rev?1:-1);};function advance(opts,val){var els=opts.elements;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}if(opts.random&&val<0){opts.randomIndex--;if(--opts.randomIndex==-2){opts.randomIndex=els.length-2;}else{if(opts.randomIndex==-1){opts.randomIndex=els.length-1;}}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{if(opts.random){if(++opts.randomIndex==els.length){opts.randomIndex=0;}opts.nextSlide=opts.randomMap[opts.randomIndex];}else{opts.nextSlide=opts.currSlide+val;if(opts.nextSlide<0){if(opts.nowrap){return false;}opts.nextSlide=els.length-1;}else{if(opts.nextSlide>=els.length){if(opts.nowrap){return false;}opts.nextSlide=0;}}}}if($.isFunction(opts.prevNextClick)){opts.prevNextClick(val>0,opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,val>=0);return false;}function buildPager(els,opts){var $p=$(opts.pager);$.each(els,function(i,o){$.fn.cycle.createPagerAnchor(i,o,$p,els,opts);});$.fn.cycle.updateActivePagerLink(opts.pager,opts.startingSlide);}$.fn.cycle.createPagerAnchor=function(i,el,$p,els,opts){var a;if($.isFunction(opts.pagerAnchorBuilder)){a=opts.pagerAnchorBuilder(i,el);}else{a='<a href="#">'+(i+1)+"</a>";}if(!a){return;}var $a=$(a);if($a.parents("body").length===0){var arr=[];if($p.length>1){$p.each(function(){var $clone=$a.clone(true);$(this).append($clone);arr.push($clone[0]);});$a=$(arr);}else{$a.appendTo($p);}}$a.bind(opts.pagerEvent,function(e){e.preventDefault();opts.nextSlide=i;var p=opts.$cont[0],timeout=p.cycleTimeout;if(timeout){clearTimeout(timeout);p.cycleTimeout=0;}if($.isFunction(opts.pagerClick)){opts.pagerClick(opts.nextSlide,els[opts.nextSlide]);}go(els,opts,1,opts.currSlide<i);return false;});if(opts.pagerEvent!="click"){$a.click(function(){return false;});}if(opts.pauseOnPagerHover){$a.hover(function(){opts.$cont[0].cyclePause++;},function(){opts.$cont[0].cyclePause--;});}};$.fn.cycle.hopsFromLast=function(opts,fwd){var hops,l=opts.lastSlide,c=opts.currSlide;if(fwd){hops=c>l?c-l:opts.slideCount-l;}else{hops=c<l?l-c:l+opts.slideCount-c;}return hops;};function clearTypeFix($slides){function hex(s){s=parseInt(s).toString(16);return s.length<2?"0"+s:s;}function getBg(e){for(;e&&e.nodeName.toLowerCase()!="html";e=e.parentNode){var v=$.css(e,"background-color");if(v.indexOf("rgb")>=0){var rgb=v.match(/\d+/g);return"#"+hex(rgb[0])+hex(rgb[1])+hex(rgb[2]);}if(v&&v!="transparent"){return v;}}return"#ffffff";}$slides.each(function(){$(this).css("background-color",getBg(this));});}$.fn.cycle.commonReset=function(curr,next,opts,w,h,rev){$(opts.elements).not(curr).hide();opts.cssBefore.opacity=1;opts.cssBefore.display="block";if(w!==false&&next.cycleW>0){opts.cssBefore.width=next.cycleW;}if(h!==false&&next.cycleH>0){opts.cssBefore.height=next.cycleH;}opts.cssAfter=opts.cssAfter||{};opts.cssAfter.display="none";$(curr).css("zIndex",opts.slideCount+(rev===true?1:0));$(next).css("zIndex",opts.slideCount+(rev===true?0:1));};$.fn.cycle.custom=function(curr,next,opts,cb,speedOverride){var $l=$(curr),$n=$(next);var speedIn=opts.speedIn,speedOut=opts.speedOut,easeIn=opts.easeIn,easeOut=opts.easeOut;$n.css(opts.cssBefore);if(speedOverride){if(typeof speedOverride=="number"){speedIn=speedOut=speedOverride;}else{speedIn=speedOut=1;}easeIn=easeOut=null;}var fn=function(){$n.animate(opts.animIn,speedIn,easeIn,cb);};$l.animate(opts.animOut,speedOut,easeOut,function(){if(opts.cssAfter){$l.css(opts.cssAfter);}if(!opts.sync){fn();}});if(opts.sync){fn();}};$.fn.cycle.transitions={fade:function($cont,$slides,opts){$slides.not(":eq("+opts.currSlide+")").css("opacity",0);opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.opacity=0;});opts.animIn={opacity:1};opts.animOut={opacity:0};opts.cssBefore={top:0,left:0};}};$.fn.cycle.ver=function(){return ver;};$.fn.cycle.defaults={fx:"fade",timeout:4000,timeoutFn:null,continuous:0,speed:1000,speedIn:null,speedOut:null,next:null,prev:null,prevNextClick:null,prevNextEvent:"click",pager:null,pagerClick:null,pagerEvent:"click",pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!$.support.opacity,cleartypeNoBg:false,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:true,requeueOnImageNotLoaded:true,requeueTimeout:250};})(jQuery);
/*
 * jQuery Cycle Plugin Transition Definitions
 * This script is a plugin for the jQuery Cycle Plugin
 * Examples and documentation at: http://malsup.com/jquery/cycle/
 * Copyright (c) 2007-2008 M. Alsup
 * Version:	 2.72
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 */
(function($){$.fn.cycle.transitions.none=function($cont,$slides,opts){opts.fxFn=function(curr,next,opts,after){$(next).show();$(curr).hide();after();};};$.fn.cycle.transitions.scrollUp=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssBefore={top:h,left:0};opts.cssFirst={top:0};opts.animIn={top:0};opts.animOut={top:-h};};$.fn.cycle.transitions.scrollDown=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var h=$cont.height();opts.cssFirst={top:0};opts.cssBefore={top:-h,left:0};opts.animIn={top:0};opts.animOut={top:h};};$.fn.cycle.transitions.scrollLeft=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst={left:0};opts.cssBefore={left:w,top:0};opts.animIn={left:0};opts.animOut={left:0-w};};$.fn.cycle.transitions.scrollRight=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push($.fn.cycle.commonReset);var w=$cont.width();opts.cssFirst={left:0};opts.cssBefore={left:-w,top:0};opts.animIn={left:0};opts.animOut={left:w};};$.fn.cycle.transitions.scrollHorz=function($cont,$slides,opts){$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts,fwd){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.left=fwd?(next.cycleW-1):(1-next.cycleW);opts.animOut.left=fwd?-curr.cycleW:curr.cycleW;});opts.cssFirst={left:0};opts.cssBefore={top:0};opts.animIn={left:0};opts.animOut={top:0};};$.fn.cycle.transitions.scrollVert=function($cont,$slides,opts){$cont.css("overflow","hidden");opts.before.push(function(curr,next,opts,fwd){$.fn.cycle.commonReset(curr,next,opts);opts.cssBefore.top=fwd?(1-next.cycleH):(next.cycleH-1);opts.animOut.top=fwd?curr.cycleH:-curr.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0};opts.animIn={top:0};opts.animOut={left:0};};$.fn.cycle.transitions.slideX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW;});opts.cssBefore={left:0,top:0,width:0};opts.animIn={width:"show"};opts.animOut={width:0};};$.fn.cycle.transitions.slideY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$(opts.elements).not(curr).hide();$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH;});opts.cssBefore={left:0,top:0,height:0};opts.animIn={height:"show"};opts.animOut={height:0};};$.fn.cycle.transitions.shuffle=function($cont,$slides,opts){var i,w=$cont.css("overflow","visible").width();$slides.css({left:0,top:0});opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);});if(!opts.speedAdjusted){opts.speed=opts.speed/2;opts.speedAdjusted=true;}opts.random=0;opts.shuffle=opts.shuffle||{left:-w,top:15};opts.els=[];for(i=0;i<$slides.length;i++){opts.els.push($slides[i]);}for(i=0;i<opts.currSlide;i++){opts.els.push(opts.els.shift());}opts.fxFn=function(curr,next,opts,cb,fwd){var $el=fwd?$(curr):$(next);$(next).css(opts.cssBefore);var count=opts.slideCount;$el.animate(opts.shuffle,opts.speedIn,opts.easeIn,function(){var hops=$.fn.cycle.hopsFromLast(opts,fwd);for(var k=0;k<hops;k++){fwd?opts.els.push(opts.els.shift()):opts.els.unshift(opts.els.pop());}if(fwd){for(var i=0,len=opts.els.length;i<len;i++){$(opts.els[i]).css("z-index",len-i+count);}}else{var z=$(curr).css("z-index");$el.css("z-index",parseInt(z)+1+count);}$el.animate({left:0,top:0},opts.speedOut,opts.easeOut,function(){$(fwd?this:curr).hide();if(cb){cb();}});});};opts.cssBefore={display:"block",opacity:1,top:0,left:0};};$.fn.cycle.transitions.turnUp=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=next.cycleH;opts.animIn.height=next.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0,height:0};opts.animIn={top:0};opts.animOut={height:0};};$.fn.cycle.transitions.turnDown=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssFirst={top:0};opts.cssBefore={left:0,top:0,height:0};opts.animOut={height:0};};$.fn.cycle.transitions.turnLeft=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=next.cycleW;opts.animIn.width=next.cycleW;});opts.cssBefore={top:0,width:0};opts.animIn={left:0};opts.animOut={width:0};};$.fn.cycle.transitions.turnRight=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW;});opts.cssBefore={top:0,left:0,width:0};opts.animIn={left:0};opts.animOut={width:0};};$.fn.cycle.transitions.zoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false,true);opts.cssBefore.top=next.cycleH/2;opts.cssBefore.left=next.cycleW/2;opts.animIn={top:0,left:0,width:next.cycleW,height:next.cycleH};opts.animOut={width:0,height:0,top:curr.cycleH/2,left:curr.cycleW/2};});opts.cssFirst={top:0,left:0};opts.cssBefore={width:0,height:0};};$.fn.cycle.transitions.fadeZoom=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,false);opts.cssBefore.left=next.cycleW/2;opts.cssBefore.top=next.cycleH/2;opts.animIn={top:0,left:0,width:next.cycleW,height:next.cycleH};});opts.cssBefore={width:0,height:0};opts.animOut={opacity:0};};$.fn.cycle.transitions.blindX=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.width=next.cycleW;opts.animOut.left=curr.cycleW;});opts.cssBefore={left:w,top:0};opts.animIn={left:0};opts.animOut={left:w};};$.fn.cycle.transitions.blindY=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssBefore={top:h,left:0};opts.animIn={top:0};opts.animOut={top:h};};$.fn.cycle.transitions.blindZ=function($cont,$slides,opts){var h=$cont.css("overflow","hidden").height();var w=$cont.width();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);opts.animIn.height=next.cycleH;opts.animOut.top=curr.cycleH;});opts.cssBefore={top:h,left:w};opts.animIn={top:0,left:0};opts.animOut={top:h,left:w};};$.fn.cycle.transitions.growX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true);opts.cssBefore.left=this.cycleW/2;opts.animIn={left:0,width:this.cycleW};opts.animOut={left:0};});opts.cssBefore={width:0,top:0};};$.fn.cycle.transitions.growY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false);opts.cssBefore.top=this.cycleH/2;opts.animIn={top:0,height:this.cycleH};opts.animOut={top:0};});opts.cssBefore={height:0,left:0};};$.fn.cycle.transitions.curtainX=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,false,true,true);opts.cssBefore.left=next.cycleW/2;opts.animIn={left:0,width:this.cycleW};opts.animOut={left:curr.cycleW/2,width:0};});opts.cssBefore={top:0,width:0};};$.fn.cycle.transitions.curtainY=function($cont,$slides,opts){opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,false,true);opts.cssBefore.top=next.cycleH/2;opts.animIn={top:0,height:next.cycleH};opts.animOut={top:curr.cycleH/2,height:0};});opts.cssBefore={left:0,height:0};};$.fn.cycle.transitions.cover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts);if(d=="right"){opts.cssBefore.left=-w;}else{if(d=="up"){opts.cssBefore.top=h;}else{if(d=="down"){opts.cssBefore.top=-h;}else{opts.cssBefore.left=w;}}}});opts.animIn={left:0,top:0};opts.animOut={opacity:1};opts.cssBefore={top:0,left:0};};$.fn.cycle.transitions.uncover=function($cont,$slides,opts){var d=opts.direction||"left";var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(d=="right"){opts.animOut.left=w;}else{if(d=="up"){opts.animOut.top=-h;}else{if(d=="down"){opts.animOut.top=h;}else{opts.animOut.left=-w;}}}});opts.animIn={left:0,top:0};opts.animOut={opacity:1};opts.cssBefore={top:0,left:0};};$.fn.cycle.transitions.toss=function($cont,$slides,opts){var w=$cont.css("overflow","visible").width();var h=$cont.height();opts.before.push(function(curr,next,opts){$.fn.cycle.commonReset(curr,next,opts,true,true,true);if(!opts.animOut.left&&!opts.animOut.top){opts.animOut={left:w*2,top:-h/2,opacity:0};}else{opts.animOut.opacity=0;}});opts.cssBefore={left:0,top:0};opts.animIn={left:0};};$.fn.cycle.transitions.wipe=function($cont,$slides,opts){var w=$cont.css("overflow","hidden").width();var h=$cont.height();opts.cssBefore=opts.cssBefore||{};var clip;if(opts.clip){if(/l2r/.test(opts.clip)){clip="rect(0px 0px "+h+"px 0px)";}else{if(/r2l/.test(opts.clip)){clip="rect(0px "+w+"px "+h+"px "+w+"px)";}else{if(/t2b/.test(opts.clip)){clip="rect(0px "+w+"px 0px 0px)";}else{if(/b2t/.test(opts.clip)){clip="rect("+h+"px "+w+"px "+h+"px 0px)";}else{if(/zoom/.test(opts.clip)){var top=parseInt(h/2);var left=parseInt(w/2);clip="rect("+top+"px "+left+"px "+top+"px "+left+"px)";}}}}}}opts.cssBefore.clip=opts.cssBefore.clip||clip||"rect(0px 0px 0px 0px)";var d=opts.cssBefore.clip.match(/(\d+)/g);var t=parseInt(d[0]),r=parseInt(d[1]),b=parseInt(d[2]),l=parseInt(d[3]);opts.before.push(function(curr,next,opts){if(curr==next){return;}var $curr=$(curr),$next=$(next);$.fn.cycle.commonReset(curr,next,opts,true,true,false);opts.cssAfter.display="block";var step=1,count=parseInt((opts.speedIn/13))-1;(function f(){var tt=t?t-parseInt(step*(t/count)):0;var ll=l?l-parseInt(step*(l/count)):0;var bb=b<h?b+parseInt(step*((h-b)/count||1)):h;var rr=r<w?r+parseInt(step*((w-r)/count||1)):w;$next.css({clip:"rect("+tt+"px "+rr+"px "+bb+"px "+ll+"px)"});(step++<=count)?setTimeout(f,13):$curr.css("display","none");})();});opts.cssBefore={display:"block",opacity:1,top:0,left:0};opts.animIn={left:0};opts.animOut={left:0};};})(jQuery);

(function($){var textarea,staticOffset;var iLastMousePos=0;var iMin=32;var grip;$.fn.TextAreaResizer=function(){return this.each(function(){textarea=$(this).addClass('processed'),staticOffset=null;$(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append($('<div class="grippie"></div>').bind("mousedown",{el:this},startDrag));var grippie=$('div.grippie',$(this).parent())[0];grippie.style.marginRight=(grippie.offsetWidth-$(this)[0].offsetWidth)+'px';});};function startDrag(e){textarea=$(e.data.el);textarea.blur();iLastMousePos=mousePosition(e).y;staticOffset=textarea.height()-iLastMousePos;textarea.css('opacity',0.25);$(document).mousemove(performDrag).mouseup(endDrag);return false;}
function performDrag(e){var iThisMousePos=mousePosition(e).y;var iMousePos=staticOffset+iThisMousePos;if(iLastMousePos>=(iThisMousePos)){iMousePos-=5;}
iLastMousePos=iThisMousePos;iMousePos=Math.max(iMin,iMousePos);textarea.height(iMousePos+'px');if(iMousePos<iMin){endDrag(e);}
return false;}
function endDrag(e){$(document).unbind('mousemove',performDrag).unbind('mouseup',endDrag);textarea.css('opacity',1);textarea.focus();textarea=null;staticOffset=null;iLastMousePos=0;}
function mousePosition(e){return{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop};};})(jQuery);

(function(w){var E=w(window),u,f,F=-1,n,x,D,v,y,L,r,m=!window.XMLHttpRequest,s=[],l=document.documentElement,k={},t=new Image(),J=new Image(),H,a,g,p,I,d,G,c,A,K;w(function(){w("body").append(w([H=w('<div id="lbOverlay" />').click(C)[0],a=w('<div id="lbCenter" />')[0],G=w('<div id="lbBottomContainer" />')[0]]).css("display","none"));g=w('<div id="lbImage" />').appendTo(a).append(p=w('<div style="position: relative;" />').append([I=w('<a id="lbPrevLink" href="#" />').click(B)[0],d=w('<a id="lbNextLink" href="#" />').click(e)[0]])[0])[0];c=w('<div id="lbBottom" />').appendTo(G).append([w('<a id="lbCloseLink" href="#" />').click(C)[0],A=w('<div id="lbCaption" />')[0],K=w('<div id="lbNumber" />')[0],w('<div style="clear: both;" />')[0]])[0]});w.slimbox=function(O,N,M){u=w.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},M);if(typeof O=="string"){O=[[O,N]];N=0}y=E.scrollTop()+(E.height()/2);L=u.initialWidth;r=u.initialHeight;w(a).css({top:Math.max(0,y-(r/2)),width:L,height:r,marginLeft:-L/2}).show();v=m||(H.currentStyle&&(H.currentStyle.position!="fixed"));if(v){H.style.position="absolute"}w(H).css("opacity",u.overlayOpacity).fadeIn(u.overlayFadeDuration);z();j(1);f=O;u.loop=u.loop&&(f.length>1);return b(N)};w.fn.slimbox=function(M,P,O){P=P||function(Q){return[Q.href,Q.title]};O=O||function(){return true};var N=this;return N.unbind("click").click(function(){var S=this,U=0,T,Q=0,R;T=w.grep(N,function(W,V){return O.call(S,W,V)});for(R=T.length;Q<R;++Q){if(T[Q]==S){U=Q}T[Q]=P(T[Q],Q)}return w.slimbox(T,U,M)})};function z(){var N=E.scrollLeft(),M=E.width();w([a,G]).css("left",N+(M/2));if(v){w(H).css({left:N,top:E.scrollTop(),width:M,height:E.height()})}}function j(M){if(M){w("object").add(m?"select":"embed").each(function(O,P){s[O]=[P,P.style.visibility];P.style.visibility="hidden"})}else{w.each(s,function(O,P){P[0].style.visibility=P[1]});s=[]}var N=M?"bind":"unbind";E[N]("scroll resize",z);w(document)[N]("keydown",o)}function o(O){var N=O.which,M=w.inArray;return(M(N,u.closeKeys)>=0)?C():(M(N,u.nextKeys)>=0)?e():(M(N,u.previousKeys)>=0)?B():null}function B(){return b(x)}function e(){return b(D)}function b(M){if(M>=0){F=M;n=f[F][0];x=(F||(u.loop?f.length:0))-1;D=((F+1)%f.length)||(u.loop?0:-1);q();a.className="lbLoading";k=new Image();k.onload=i;k.src=n;}return false;}function i(){a.className="";w(g).css({backgroundImage:"url("+n+")",visibility:"hidden",display:""});w(p).width(k.width);w([p,I,d]).height(k.height);w(A).html(f[F][1]+"<br /> <a href='"+n+"'>Download Image</a><br />"||"");w(K).html((((f.length>1)&&u.counterText)||"").replace(/{x}/,F+1).replace(/{y}/,f.length));if(x>=0){t.src=f[x][0]}if(D>=0){J.src=f[D][0]}L=g.offsetWidth;r=g.offsetHeight;var M=Math.max(0,y-(r/2));if(a.offsetHeight!=r){w(a).animate({height:r,top:M},u.resizeDuration,u.resizeEasing)}if(a.offsetWidth!=L){w(a).animate({width:L,marginLeft:-L/2},u.resizeDuration,u.resizeEasing)}w(a).queue(function(){w(G).css({width:L,top:M+r,marginLeft:-L/2,visibility:"hidden",display:""});w(g).css({display:"none",visibility:"",opacity:""}).fadeIn(u.imageFadeDuration,h)})}function h(){if(x>=0){w(I).show()}if(D>=0){w(d).show()}w(c).css("marginTop",-c.offsetHeight).animate({marginTop:0},u.captionAnimationDuration);G.style.visibility=""}function q(){k.onload=null;k.src=t.src=J.src=n;w([a,g,c]).stop(true);w([I,d,g,G]).hide()}function C(){if(F>=0){q();F=x=D=-1;w(a).hide();w(H).stop().fadeOut(u.overlayFadeDuration,j)}return false}})(jQuery);if(!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)){jQuery(function($){$("a[rel^='lightbox']").slimbox({},function(el){return[el.href,el.getAttribute("slimboxcaption")!=null?el.getAttribute("slimboxcaption"):""];},function(el){return(this==el)||((this.rel.length>8)&&(this.rel==el.rel));});});};
 /*
 * TipTip
 * Copyright 2010 Drew Wilson
 * www.drewwilson.com
 * code.drewwilson.com/entry/tiptip-jquery-plugin
 *
 * Version 1.3   -   Updated: Mar. 23, 2010
 *
 * This Plug-In will create a custom tooltip to replace the default
 * browser tooltip. It is extremely lightweight and very smart in
 * that it detects the edges of the browser window and will make sure
 * the tooltip stays within the current window size. As a result the
 * tooltip will adjust itself to be displayed above, below, to the left 
 * or to the right depending on what is necessary to stay within the
 * browser window. It is completely customizable as well via CSS.
 *
 * This TipTip jQuery plug-in is dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

(function(a){a.fn.tipTip=function(c){var g={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){},unbind:false};var e=a.extend(g,c);if(a("#tiptip_holder").length<=0){var b=a('<div id="tiptip_holder" style="max-width:'+e.maxWidth+';"></div>');var d=a('<div id="tiptip_content"></div>');var f=a('<div id="tiptip_arrow"></div>');a("body").append(b.html(d).prepend(f.html('<div id="tiptip_arrow_inner"></div>')))}else{var b=a("#tiptip_holder");var d=a("#tiptip_content");var f=a("#tiptip_arrow")}return this.each(function(){var j=a(this);var o="";if(e.content){o=e.content}else{o=j.attr(e.attribute)}if(e.unbind){var l=j.attr("class").split(" ");var n="";var h="";a.each(l,function(p,q){if(q.match("^cd:")=="cd:"){h=q;n=q.replace(/^cd:/g,"")}});j.attr(e.attribute,unescape(n));j.removeClass(h);j.unbind(e.activation);return true}if(o!=""){if(!e.content){j.addClass("cd:"+escape(o));j.removeAttr(e.attribute)}var i=false;if(e.activation=="hover"){j.hover(function(){m()},function(){if(!e.keepAlive){k()}});if(e.keepAlive){b.hover(function(){},function(){k()})}}else{if(e.activation=="focus"){j.focus(function(){m()}).blur(function(){k()})}else{if(e.activation=="click"){j.click(function(){m();return false}).hover(function(){},function(){if(!e.keepAlive){k()}});if(e.keepAlive){b.hover(function(){},function(){k()})}}}}function m(){e.enter.call(this);d.html(o);b.hide().removeAttr("class").css("margin","0");f.removeAttr("style");var B=parseInt(j.offset()["top"]);var s=parseInt(j.offset()["left"]);var y=parseInt(j.outerWidth());var D=parseInt(j.outerHeight());var A=b.outerWidth();var v=b.outerHeight();var z=Math.round((y-A)/2);var r=Math.round((D-v)/2);var q=Math.round(s+z);var p=Math.round(B+D+e.edgeOffset);var w="";var F="";var x=Math.round(A-12)/2;if(e.defaultPosition=="bottom"){w="_bottom"}else{if(e.defaultPosition=="top"){w="_top"}else{if(e.defaultPosition=="left"){w="_left"}else{if(e.defaultPosition=="right"){w="_right"}}}}var u=(z+s)<parseInt(a(window).scrollLeft());var t=(A+s)>parseInt(a(window).width());if((u&&z<0)||(w=="_right"&&!t)||(w=="_left"&&s<(A+e.edgeOffset+5))){w="_right";F=Math.round(v-13)/2;x=-12;q=Math.round(s+y+e.edgeOffset);p=Math.round(B+r)}else{if((t&&z<0)||(w=="_left"&&!u)){w="_left";F=Math.round(v-13)/2;x=Math.round(A);q=Math.round(s-(A+e.edgeOffset+5));p=Math.round(B+r)}}var C=(B+D+e.edgeOffset+v+8)>parseInt(a(window).height()+a(window).scrollTop());var E=((B+D)-(e.edgeOffset+v+8))<0;if(C||(w=="_bottom"&&C)||(w=="_top"&&!E)){if(w=="_top"||w=="_bottom"){w="_top"}else{w=w+"_top"}F=v;p=Math.round(B-(v+5+e.edgeOffset))}else{if(E|(w=="_top"&&E)||(w=="_bottom"&&!C)){if(w=="_top"||w=="_bottom"){w="_bottom"}else{w=w+"_bottom"}F=-12;p=Math.round(B+D+e.edgeOffset)}}if(w=="_right_top"||w=="_left_top"){p=p+5}else{if(w=="_right_bottom"||w=="_left_bottom"){p=p-5}}if(w=="_left_top"||w=="_left_bottom"){q=q+5}f.css({"margin-left":x+"px","margin-top":F+"px"});b.css({"margin-left":q+"px","margin-top":p+"px"}).attr("class","tip"+w);if(i){clearTimeout(i)}i=setTimeout(function(){b.stop(true,true).fadeIn(e.fadeIn)},e.delay)}function k(){e.exit.call(this);if(i){clearTimeout(i)}b.fadeOut(e.fadeOut)}}})}})(jQuery);
/*!
	Colorbox v1.5.5 - 2014-03-13
	jQuery lightbox and modal window plugin
	(c) 2014 Jack Moore - http://www.jacklmoore.com/colorbox
	license: http://www.opensource.org/licenses/mit-license.php
*/
(function(t,e,i){function n(i,n,o){var r=e.createElement(i);return n&&(r.id=Z+n),o&&(r.style.cssText=o),t(r)}function o(){return i.innerHeight?i.innerHeight:t(i).height()}function r(e,i){i!==Object(i)&&(i={}),this.cache={},this.el=e,this.value=function(e){var n;return void 0===this.cache[e]&&(n=t(this.el).attr("data-cbox-"+e),void 0!==n?this.cache[e]=n:void 0!==i[e]?this.cache[e]=i[e]:void 0!==X[e]&&(this.cache[e]=X[e])),this.cache[e]},this.get=function(e){var i=this.value(e);return t.isFunction(i)?i.call(this.el,this):i}}function h(t){var e=E.length,i=(z+t)%e;return 0>i?e+i:i}function s(t,e){return Math.round((/%/.test(t)?("x"===e?W.width():o())/100:1)*parseInt(t,10))}function a(t,e){return t.get("photo")||t.get("photoRegex").test(e)}function l(t,e){return t.get("retinaUrl")&&i.devicePixelRatio>1?e.replace(t.get("photoRegex"),t.get("retinaSuffix")):e}function d(t){"contains"in x[0]&&!x[0].contains(t.target)&&t.target!==v[0]&&(t.stopPropagation(),x.focus())}function c(t){c.str!==t&&(x.add(v).removeClass(c.str).addClass(t),c.str=t)}function g(){z=0,rel&&"nofollow"!==rel?(E=t("."+te).filter(function(){var e=t.data(this,Y),i=new r(this,e);return i.get("rel")===rel}),z=E.index(_.el),-1===z&&(E=E.add(_.el),z=E.length-1)):E=t(_.el)}function u(i){t(e).trigger(i),se.triggerHandler(i)}function f(i){var o;G||(o=t(i).data("colorbox"),_=new r(i,o),rel=_.get("rel"),g(),$||($=q=!0,c(_.get("className")),x.css({visibility:"hidden",display:"block",opacity:""}),L=n(ae,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),b.css({width:"",height:""}).append(L),D=T.height()+k.height()+b.outerHeight(!0)-b.height(),j=C.width()+H.width()+b.outerWidth(!0)-b.width(),A=L.outerHeight(!0),N=L.outerWidth(!0),_.w=s(_.get("initialWidth"),"x"),_.h=s(_.get("initialHeight"),"y"),L.css({width:"",height:_.h}),J.position(),u(ee),_.get("onOpen"),O.add(R).hide(),x.focus(),_.get("trapFocus")&&e.addEventListener&&(e.addEventListener("focus",d,!0),se.one(re,function(){e.removeEventListener("focus",d,!0)})),_.get("returnFocus")&&se.one(re,function(){t(_.el).focus()})),v.css({opacity:parseFloat(_.get("opacity"))||"",cursor:_.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),_.get("closeButton")?B.html(_.get("close")).appendTo(b):B.appendTo("<div/>"),w())}function p(){!x&&e.body&&(V=!1,W=t(i),x=n(ae).attr({id:Y,"class":t.support.opacity===!1?Z+"IE":"",role:"dialog",tabindex:"-1"}).hide(),v=n(ae,"Overlay").hide(),M=t([n(ae,"LoadingOverlay")[0],n(ae,"LoadingGraphic")[0]]),y=n(ae,"Wrapper"),b=n(ae,"Content").append(R=n(ae,"Title"),F=n(ae,"Current"),P=t('<button type="button"/>').attr({id:Z+"Previous"}),K=t('<button type="button"/>').attr({id:Z+"Next"}),I=n("button","Slideshow"),M),B=t('<button type="button"/>').attr({id:Z+"Close"}),y.append(n(ae).append(n(ae,"TopLeft"),T=n(ae,"TopCenter"),n(ae,"TopRight")),n(ae,!1,"clear:left").append(C=n(ae,"MiddleLeft"),b,H=n(ae,"MiddleRight")),n(ae,!1,"clear:left").append(n(ae,"BottomLeft"),k=n(ae,"BottomCenter"),n(ae,"BottomRight"))).find("div div").css({"float":"left"}),S=n(ae,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),O=K.add(P).add(F).add(I),t(e.body).append(v,x.append(y,S)))}function m(){function i(t){t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),f(this))}return x?(V||(V=!0,K.click(function(){J.next()}),P.click(function(){J.prev()}),B.click(function(){J.close()}),v.click(function(){_.get("overlayClose")&&J.close()}),t(e).bind("keydown."+Z,function(t){var e=t.keyCode;$&&_.get("escKey")&&27===e&&(t.preventDefault(),J.close()),$&&_.get("arrowKey")&&E[1]&&!t.altKey&&(37===e?(t.preventDefault(),P.click()):39===e&&(t.preventDefault(),K.click()))}),t.isFunction(t.fn.on)?t(e).on("click."+Z,"."+te,i):t("."+te).live("click."+Z,i)),!0):!1}function w(){var o,r,h,d=J.prep,c=++le;q=!0,U=!1,u(he),u(ie),_.get("onLoad"),_.h=_.get("height")?s(_.get("height"),"y")-A-D:_.get("innerHeight")&&s(_.get("innerHeight"),"y"),_.w=_.get("width")?s(_.get("width"),"x")-N-j:_.get("innerWidth")&&s(_.get("innerWidth"),"x"),_.mw=_.w,_.mh=_.h,_.get("maxWidth")&&(_.mw=s(_.get("maxWidth"),"x")-N-j,_.mw=_.w&&_.w<_.mw?_.w:_.mw),_.get("maxHeight")&&(_.mh=s(_.get("maxHeight"),"y")-A-D,_.mh=_.h&&_.h<_.mh?_.h:_.mh),o=_.get("href"),Q=setTimeout(function(){M.show()},100),_.get("inline")?(h=n(ae).hide().insertBefore(t(o)[0]),se.one(he,function(){h.replaceWith(L.children())}),d(t(o))):_.get("iframe")?d(" "):_.get("html")?d(_.get("html")):a(_,o)?(o=l(_,o),U=e.createElement("img"),t(U).addClass(Z+"Photo").bind("error",function(){d(n(ae,"Error").html(_.get("imgError")))}).one("load",function(){var e;c===le&&(t.each(["alt","longdesc","aria-describedby"],function(e,i){var n=t(_.el).attr(i)||t(_.el).attr("data-"+i);n&&U.setAttribute(i,n)}),_.get("retinaImage")&&i.devicePixelRatio>1&&(U.height=U.height/i.devicePixelRatio,U.width=U.width/i.devicePixelRatio),_.get("scalePhotos")&&(r=function(){U.height-=U.height*e,U.width-=U.width*e},_.mw&&U.width>_.mw&&(e=(U.width-_.mw)/U.width,r()),_.mh&&U.height>_.mh&&(e=(U.height-_.mh)/U.height,r())),_.h&&(U.style.marginTop=Math.max(_.mh-U.height,0)/2+"px"),E[1]&&(_.get("loop")||E[z+1])&&(U.style.cursor="pointer",U.onclick=function(){J.next()}),U.style.width=U.width+"px",U.style.height=U.height+"px",setTimeout(function(){d(U)},1))}),setTimeout(function(){U.src=o},1)):o&&S.load(o,_.get("data"),function(e,i){c===le&&d("error"===i?n(ae,"Error").html(_.get("xhrError")):t(this).contents())})}var v,x,y,b,T,C,H,k,E,W,L,S,M,R,F,I,K,P,B,O,_,D,j,A,N,z,U,$,q,G,Q,J,V,X={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return t(this).attr("href")},title:function(){return this.title}},Y="colorbox",Z="cbox",te=Z+"Element",ee=Z+"_open",ie=Z+"_load",ne=Z+"_complete",oe=Z+"_cleanup",re=Z+"_closed",he=Z+"_purge",se=t("<a/>"),ae="div",le=0,de={},ce=function(){function t(){clearTimeout(h)}function e(){(_.get("loop")||E[z+1])&&(t(),h=setTimeout(J.next,_.get("slideshowSpeed")))}function i(){I.html(_.get("slideshowStop")).unbind(a).one(a,n),se.bind(ne,e).bind(ie,t),x.removeClass(s+"off").addClass(s+"on")}function n(){t(),se.unbind(ne,e).unbind(ie,t),I.html(_.get("slideshowStart")).unbind(a).one(a,function(){J.next(),i()}),x.removeClass(s+"on").addClass(s+"off")}function o(){r=!1,I.hide(),t(),se.unbind(ne,e).unbind(ie,t),x.removeClass(s+"off "+s+"on")}var r,h,s=Z+"Slideshow_",a="click."+Z;return function(){r?_.get("slideshow")||(se.unbind(oe,o),o()):_.get("slideshow")&&E[1]&&(r=!0,se.one(oe,o),_.get("slideshowAuto")?i():n(),I.show())}}();t.colorbox||(t(p),J=t.fn[Y]=t[Y]=function(e,i){var n,o=this;if(e=e||{},t.isFunction(o))o=t("<a/>"),e.open=!0;else if(!o[0])return o;return o[0]?(p(),m()&&(i&&(e.onComplete=i),o.each(function(){var i=t.data(this,Y)||{};t.data(this,Y,t.extend(i,e))}).addClass(te),n=new r(o[0],e),n.get("open")&&f(o[0])),o):o},J.position=function(e,i){function n(){T[0].style.width=k[0].style.width=b[0].style.width=parseInt(x[0].style.width,10)-j+"px",b[0].style.height=C[0].style.height=H[0].style.height=parseInt(x[0].style.height,10)-D+"px"}var r,h,a,l=0,d=0,c=x.offset();if(W.unbind("resize."+Z),x.css({top:-9e4,left:-9e4}),h=W.scrollTop(),a=W.scrollLeft(),_.get("fixed")?(c.top-=h,c.left-=a,x.css({position:"fixed"})):(l=h,d=a,x.css({position:"absolute"})),d+=_.get("right")!==!1?Math.max(W.width()-_.w-N-j-s(_.get("right"),"x"),0):_.get("left")!==!1?s(_.get("left"),"x"):Math.round(Math.max(W.width()-_.w-N-j,0)/2),l+=_.get("bottom")!==!1?Math.max(o()-_.h-A-D-s(_.get("bottom"),"y"),0):_.get("top")!==!1?s(_.get("top"),"y"):Math.round(Math.max(o()-_.h-A-D,0)/2),x.css({top:c.top,left:c.left,visibility:"visible"}),y[0].style.width=y[0].style.height="9999px",r={width:_.w+N+j,height:_.h+A+D,top:l,left:d},e){var g=0;t.each(r,function(t){return r[t]!==de[t]?(g=e,void 0):void 0}),e=g}de=r,e||x.css(r),x.dequeue().animate(r,{duration:e||0,complete:function(){n(),q=!1,y[0].style.width=_.w+N+j+"px",y[0].style.height=_.h+A+D+"px",_.get("reposition")&&setTimeout(function(){W.bind("resize."+Z,J.position)},1),i&&i()},step:n})},J.resize=function(t){var e;$&&(t=t||{},t.width&&(_.w=s(t.width,"x")-N-j),t.innerWidth&&(_.w=s(t.innerWidth,"x")),L.css({width:_.w}),t.height&&(_.h=s(t.height,"y")-A-D),t.innerHeight&&(_.h=s(t.innerHeight,"y")),t.innerHeight||t.height||(e=L.scrollTop(),L.css({height:"auto"}),_.h=L.height()),L.css({height:_.h}),e&&L.scrollTop(e),J.position("none"===_.get("transition")?0:_.get("speed")))},J.prep=function(i){function o(){return _.w=_.w||L.width(),_.w=_.mw&&_.mw<_.w?_.mw:_.w,_.w}function s(){return _.h=_.h||L.height(),_.h=_.mh&&_.mh<_.h?_.mh:_.h,_.h}if($){var d,g="none"===_.get("transition")?0:_.get("speed");L.remove(),L=n(ae,"LoadedContent").append(i),L.hide().appendTo(S.show()).css({width:o(),overflow:_.get("scrolling")?"auto":"hidden"}).css({height:s()}).prependTo(b),S.hide(),t(U).css({"float":"none"}),c(_.get("className")),d=function(){function i(){t.support.opacity===!1&&x[0].style.removeAttribute("filter")}var n,o,s=E.length;$&&(o=function(){clearTimeout(Q),M.hide(),u(ne),_.get("onComplete")},R.html(_.get("title")).show(),L.show(),s>1?("string"==typeof _.get("current")&&F.html(_.get("current").replace("{current}",z+1).replace("{total}",s)).show(),K[_.get("loop")||s-1>z?"show":"hide"]().html(_.get("next")),P[_.get("loop")||z?"show":"hide"]().html(_.get("previous")),ce(),_.get("preloading")&&t.each([h(-1),h(1)],function(){var i,n=E[this],o=new r(n,t.data(n,Y)),h=o.get("href");h&&a(o,h)&&(h=l(o,h),i=e.createElement("img"),i.src=h)})):O.hide(),_.get("iframe")?(n=e.createElement("iframe"),"frameBorder"in n&&(n.frameBorder=0),"allowTransparency"in n&&(n.allowTransparency="true"),_.get("scrolling")||(n.scrolling="no"),t(n).attr({src:_.get("href"),name:(new Date).getTime(),"class":Z+"Iframe",allowFullScreen:!0}).one("load",o).appendTo(L),se.one(he,function(){n.src="//about:blank"}),_.get("fastIframe")&&t(n).trigger("load")):o(),"fade"===_.get("transition")?x.fadeTo(g,1,i):i())},"fade"===_.get("transition")?x.fadeTo(g,0,function(){J.position(0,d)}):J.position(g,d)}},J.next=function(){!q&&E[1]&&(_.get("loop")||E[z+1])&&(z=h(1),f(E[z]))},J.prev=function(){!q&&E[1]&&(_.get("loop")||z)&&(z=h(-1),f(E[z]))},J.close=function(){$&&!G&&(G=!0,$=!1,u(oe),_.get("onCleanup"),W.unbind("."+Z),v.fadeTo(_.get("fadeOut")||0,0),x.stop().fadeTo(_.get("fadeOut")||0,0,function(){x.hide(),v.hide(),u(he),L.remove(),setTimeout(function(){G=!1,u(re),_.get("onClosed")},1)}))},J.remove=function(){x&&(x.stop(),t.colorbox.close(),x.stop().remove(),v.remove(),G=!1,x=null,t("."+te).removeData(Y).removeClass(te),t(e).unbind("click."+Z))},J.element=function(){return t(_.el)},J.settings=X)})(jQuery,document,window);

(function(){"use strict";var $,EkkoLightbox;$=jQuery;EkkoLightbox=function(element,options){var content,footer,header,_this=this;this.options=$.extend({title:null,footer:null,remote:null},$.fn.ekkoLightbox.defaults,options||{});this.$element=$(element);content='';this.modal_id=this.options.modal_id?this.options.modal_id:'ekkoLightbox-'+Math.floor((Math.random()*1000)+1);header='<div class="modal-header"'+(this.options.title||this.options.always_show_close?'':' style="display:none"')+'><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+(this.options.title||"&nbsp;")+'</h4></div>';footer='<div class="modal-footer"'+(this.options.footer?'':' style="display:none"')+'>'+this.options.footer+'</div>';$(document.body).append('<div id="'+this.modal_id+'" class="ekko-lightbox modal fade" tabindex="-1"><div class="modal-dialog"><div class="modal-content">'+header+'<div class="modal-body"><div class="ekko-lightbox-container"><div></div></div></div>'+footer+'</div></div></div>');this.modal=$('#'+this.modal_id);this.modal_dialog=this.modal.find('.modal-dialog').first();this.modal_content=this.modal.find('.modal-content').first();this.modal_body=this.modal.find('.modal-body').first();this.lightbox_container=this.modal_body.find('.ekko-lightbox-container').first();this.lightbox_body=this.lightbox_container.find('> div:first-child').first();this.showLoading();this.modal_arrows=null;this.border={top:parseFloat(this.modal_dialog.css('border-top-width'))+parseFloat(this.modal_content.css('border-top-width'))+parseFloat(this.modal_body.css('border-top-width')),right:parseFloat(this.modal_dialog.css('border-right-width'))+parseFloat(this.modal_content.css('border-right-width'))+parseFloat(this.modal_body.css('border-right-width')),bottom:parseFloat(this.modal_dialog.css('border-bottom-width'))+parseFloat(this.modal_content.css('border-bottom-width'))+parseFloat(this.modal_body.css('border-bottom-width')),left:parseFloat(this.modal_dialog.css('border-left-width'))+parseFloat(this.modal_content.css('border-left-width'))+parseFloat(this.modal_body.css('border-left-width'))};this.padding={top:parseFloat(this.modal_dialog.css('padding-top'))+parseFloat(this.modal_content.css('padding-top'))+parseFloat(this.modal_body.css('padding-top')),right:parseFloat(this.modal_dialog.css('padding-right'))+parseFloat(this.modal_content.css('padding-right'))+parseFloat(this.modal_body.css('padding-right')),bottom:parseFloat(this.modal_dialog.css('padding-bottom'))+parseFloat(this.modal_content.css('padding-bottom'))+parseFloat(this.modal_body.css('padding-bottom')),left:parseFloat(this.modal_dialog.css('padding-left'))+parseFloat(this.modal_content.css('padding-left'))+parseFloat(this.modal_body.css('padding-left'))};this.modal.on('show.bs.modal',this.options.onShow.bind(this)).on('shown.bs.modal',function(){_this.modal_shown();return _this.options.onShown.call(_this);}).on('hide.bs.modal',this.options.onHide.bind(this)).on('hidden.bs.modal',function(){if(_this.gallery){$(document).off('keydown.ekkoLightbox');}
_this.modal.remove();return _this.options.onHidden.call(_this);}).modal('show',options);return this.modal;};EkkoLightbox.prototype={modal_shown:function(){var video_id,_this=this;if(!this.options.remote){return this.error('No remote target given');}else{this.gallery=this.$element.data('gallery');if(this.gallery){if(this.options.gallery_parent_selector==='document.body'||this.options.gallery_parent_selector===''){this.gallery_items=$(document.body).find('*[data-toggle="lightbox"][data-gallery="'+this.gallery+'"]');}else{this.gallery_items=this.$element.parents(this.options.gallery_parent_selector).first().find('*[data-toggle="lightbox"][data-gallery="'+this.gallery+'"]');}
this.gallery_index=this.gallery_items.index(this.$element);$(document).on('keydown.ekkoLightbox',this.navigate.bind(this));if(this.options.directional_arrows&&this.gallery_items.length>1){this.lightbox_container.prepend('<div class="ekko-lightbox-nav-overlay"><a href="#" class="'+this.strip_stops(this.options.left_arrow_class)+'"></a><a href="#" class="'+this.strip_stops(this.options.right_arrow_class)+'"></a></div>');this.modal_arrows=this.lightbox_container.find('div.ekko-lightbox-nav-overlay').first();this.lightbox_container.find('a'+this.strip_spaces(this.options.left_arrow_class)).on('click',function(event){event.preventDefault();return _this.navigate_left();});this.lightbox_container.find('a'+this.strip_spaces(this.options.right_arrow_class)).on('click',function(event){event.preventDefault();return _this.navigate_right();});}}
if(this.options.type){if(this.options.type==='image'){return this.preloadImage(this.options.remote,true);}else if(this.options.type==='youtube'&&(video_id=this.getYoutubeId(this.options.remote))){return this.showYoutubeVideo(video_id);}else if(this.options.type==='vimeo'){return this.showVimeoVideo(this.options.remote);}else if(this.options.type==='instagram'){return this.showInstagramVideo(this.options.remote);}else if(this.options.type==='url'){return this.showInstagramVideo(this.options.remote);}else{return this.error("Could not detect remote target type. Force the type using data-type=\"image|youtube|vimeo|url\"");}}else{return this.detectRemoteType(this.options.remote);}}},strip_stops:function(str){return str.replace(/\./g,'');},strip_spaces:function(str){return str.replace(/\s/g,'');},isImage:function(str){return str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i);},isSwf:function(str){return str.match(/\.(swf)((\?|#).*)?$/i);},getYoutubeId:function(str){var match;match=str.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(match&&match[2].length===11){return match[2];}else{return false;}},getVimeoId:function(str){if(str.indexOf('vimeo')>0){return str;}else{return false;}},getInstagramId:function(str){if(str.indexOf('instagram')>0){return str;}else{return false;}},navigate:function(event){event=event||window.event;if(event.keyCode===39||event.keyCode===37){if(event.keyCode===39){return this.navigate_right();}else if(event.keyCode===37){return this.navigate_left();}}},navigateTo:function(index){var next,src;if(index<0||index>this.gallery_items.length-1){return this;}
this.showLoading();this.gallery_index=index;this.options.onNavigate.call(this,this.gallery_index);this.$element=$(this.gallery_items.get(this.gallery_index));this.updateTitleAndFooter();src=this.$element.attr('data-remote')||this.$element.attr('href');this.detectRemoteType(src,this.$element.attr('data-type')||false);if(this.gallery_index+1<this.gallery_items.length){next=$(this.gallery_items.get(this.gallery_index+1),false);src=next.attr('data-remote')||next.attr('href');if(next.attr('data-type')==='image'||this.isImage(src)){return this.preloadImage(src,false);}}},navigate_left:function(){if(this.gallery_items.length===1){return;}
if(this.gallery_index===0){this.gallery_index=this.gallery_items.length-1;}else{this.gallery_index--;}
this.options.onNavigate.call(this,'left',this.gallery_index);return this.navigateTo(this.gallery_index);},navigate_right:function(){if(this.gallery_items.length===1){return;}
if(this.gallery_index===this.gallery_items.length-1){this.gallery_index=0;}else{this.gallery_index++;}
this.options.onNavigate.call(this,'right',this.gallery_index);return this.navigateTo(this.gallery_index);},detectRemoteType:function(src,type){var video_id;if(type==='image'||this.isImage(src)){this.options.type='image';return this.preloadImage(src,true);}else if(type==='youtube'||(video_id=this.getYoutubeId(src))){this.options.type='youtube';return this.showYoutubeVideo(video_id);}else if(type==='vimeo'||(video_id=this.getVimeoId(src))){this.options.type='vimeo';return this.showVimeoVideo(video_id);}else if(type==='instagram'||(video_id=this.getInstagramId(src))){this.options.type='instagram';return this.showInstagramVideo(video_id);}else if(type==='url'||(video_id=this.getInstagramId(src))){this.options.type='instagram';return this.showInstagramVideo(video_id);}else{this.options.type='url';return this.loadRemoteContent(src);}},updateTitleAndFooter:function(){var caption,footer,header,title;header=this.modal_content.find('.modal-header');footer=this.modal_content.find('.modal-footer');title=this.$element.data('title')||"";caption=this.$element.data('footer')||"";if(title||this.options.always_show_close){header.css('display','').find('.modal-title').html(title||"&nbsp;");}else{header.css('display','none');}
if(caption){footer.css('display','').html(caption);}else{footer.css('display','none');}
return this;},showLoading:function(){this.lightbox_body.html('<div class="modal-loading">Loading..</div>');return this;},showYoutubeVideo:function(id){var aspectRatio,height,width;aspectRatio=560/315;width=this.$element.data('width')||560;width=this.checkDimensions(width);height=width/aspectRatio;this.resize(width);this.lightbox_body.html('<iframe width="'+width+'" height="'+height+'" src="//www.youtube.com/embed/'+id+'?badge=0&autoplay=1&html5=1" frameborder="0" allowfullscreen></iframe>');this.options.onContentLoaded.call(this);if(this.modal_arrows){return this.modal_arrows.css('display','none');}},showVimeoVideo:function(id){var aspectRatio,height,width;aspectRatio=500/281;width=this.$element.data('width')||560;width=this.checkDimensions(width);height=width/aspectRatio;this.resize(width);this.lightbox_body.html('<iframe width="'+width+'" height="'+height+'" src="'+id+'?autoplay=1" frameborder="0" allowfullscreen></iframe>');this.options.onContentLoaded.call(this);if(this.modal_arrows){return this.modal_arrows.css('display','none');}},showInstagramVideo:function(id){var width;width=this.$element.data('width')||612;width=this.checkDimensions(width);this.resize(width);this.lightbox_body.html('<iframe width="'+width+'" height="'+width+'" src="'+this.addTrailingSlash(id)+'embed/" frameborder="0" allowfullscreen></iframe>');this.options.onContentLoaded.call(this);if(this.modal_arrows){return this.modal_arrows.css('display','none');}},loadRemoteContent:function(url){var disableExternalCheck,width,_this=this;width=this.$element.data('width')||560;this.resize(width);disableExternalCheck=this.$element.data('disableExternalCheck')||false;console.log(disableExternalCheck,this.isExternal(url));if(!disableExternalCheck&&!this.isExternal(url)){this.lightbox_body.load(url,$.proxy(function(){return _this.$element.trigger('loaded.bs.modal');}));}else{this.lightbox_body.html('<iframe width="'+width+'" height="'+width+'" src="'+url+'" frameborder="0" allowfullscreen></iframe>');this.options.onContentLoaded.call(this);}
if(this.modal_arrows){return this.modal_arrows.css('display','block');}},isExternal:function(url){var match;match=url.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);if(typeof match[1]==="string"&&match[1].length>0&&match[1].toLowerCase()!==location.protocol){return true;}
if(typeof match[2]==="string"&&match[2].length>0&&match[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host){return true;}
return false;},error:function(message){this.lightbox_body.html(message);return this;},preloadImage:function(src,onLoadShowImage){var img,_this=this;img=new Image();if((onLoadShowImage==null)||onLoadShowImage===true){img.onload=function(){var image;image=$('<img />');image.attr('src',img.src);image.addClass('img-responsive');_this.lightbox_body.html(image);if(_this.modal_arrows){_this.modal_arrows.css('display','block');}
_this.resize(img.width);return _this.options.onContentLoaded.call(_this);};img.onerror=function(){return _this.error('Failed to load image: '+src);};}
img.src=src;return img;},resize:function(width){var width_total;width_total=width+this.border.left+this.padding.left+this.padding.right+this.border.right;this.modal_dialog.css('width','auto').css('max-width',width_total);this.lightbox_container.find('a').css('padding-top',function(){return $(this).parent().height()/2;});return this;},checkDimensions:function(width){var body_width,width_total;width_total=width+this.border.left+this.padding.left+this.padding.right+this.border.right;body_width=document.body.clientWidth;if(width_total>body_width){width=this.modal_body.width();}
return width;},close:function(){return this.modal.modal('hide');},addTrailingSlash:function(url){if(url.substr(-1)!=='/'){url+='/';}
return url;}};$.fn.ekkoLightbox=function(options){return this.each(function(){var $this;$this=$(this);options=$.extend({remote:$this.attr('data-remote')||$this.attr('href'),gallery_parent_selector:$this.attr('data-parent'),type:$this.attr('data-type')},options,$this.data());new EkkoLightbox(this,options);return this;});};$.fn.ekkoLightbox.defaults={gallery_parent_selector:'*:not(.row)',left_arrow_class:'.glyphicon .glyphicon-chevron-left',right_arrow_class:'.glyphicon .glyphicon-chevron-right',directional_arrows:true,type:null,always_show_close:true,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}};}).call(this);

if(typeof Object.create!=="function"){Object.create=function(e){function t(){}t.prototype=e;return new t}}var ua={toString:function(){return navigator.userAgent},test:function(e){return this.toString().toLowerCase().indexOf(e.toLowerCase())>-1}};ua.version=(ua.toString().toLowerCase().match(/[\s\S]+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1];ua.webkit=ua.test("webkit");ua.gecko=ua.test("gecko")&&!ua.webkit;ua.opera=ua.test("opera");ua.ie=ua.test("msie")&&!ua.opera;ua.ie6=ua.ie&&document.compatMode&&typeof document.documentElement.style.maxHeight==="undefined";ua.ie7=ua.ie&&document.documentElement&&typeof document.documentElement.style.maxHeight!=="undefined"&&typeof XDomainRequest==="undefined";ua.ie8=ua.ie&&typeof XDomainRequest!=="undefined";var domReady=function(){var e=[];var t=function(){if(!arguments.callee.done){arguments.callee.done=true;for(var t=0;t<e.length;t++){e[t]()}}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",t,false)}if(ua.ie){(function(){try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,50);return}t()})();document.onreadystatechange=function(){if(document.readyState==="complete"){document.onreadystatechange=null;t()}}}if(ua.webkit&&document.readyState){(function(){if(document.readyState!=="loading"){t()}else{setTimeout(arguments.callee,10)}})()}window.onload=t;return function(t){if(typeof t==="function"){e[e.length]=t}return t}}();var cssHelper=function(){var e={BLOCKS:/[^\s{;][^{;]*\{(?:[^{}]*\{[^{}]*\}[^{}]*|[^{}]*)*\}/g,BLOCKS_INSIDE:/[^\s{][^{]*\{[^{}]*\}/g,DECLARATIONS:/[a-zA-Z\-]+[^;]*:[^;]+;/g,RELATIVE_URLS:/url\(['"]?([^\/\)'"][^:\)'"]+)['"]?\)/g,REDUNDANT_COMPONENTS:/(?:\/\*([^*\\\\]|\*(?!\/))+\*\/|@import[^;]+;)/g,REDUNDANT_WHITESPACE:/\s*(,|:|;|\{|\})\s*/g,WHITESPACE_IN_PARENTHESES:/\(\s*(\S*)\s*\)/g,MORE_WHITESPACE:/\s{2,}/g,FINAL_SEMICOLONS:/;\}/g,NOT_WHITESPACE:/\S+/g};var t,n=false;var r=[];var s=function(e){if(typeof e==="function"){r[r.length]=e}};var o=function(){for(var e=0;e<r.length;e++){r[e](t)}};var u={};var a=function(e,t){if(u[e]){var n=u[e].listeners;if(n){for(var r=0;r<n.length;r++){n[r](t)}}}};var f=function(e,t,n){if(ua.ie&&!window.XMLHttpRequest){window.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}if(!XMLHttpRequest){return""}var r=new XMLHttpRequest;try{r.open("get",e,true);r.setRequestHeader("X_REQUESTED_WITH","XMLHttpRequest")}catch(i){n();return}var s=false;setTimeout(function(){s=true},5e3);document.documentElement.style.cursor="progress";r.onreadystatechange=function(){if(r.readyState===4&&!s){if(!r.status&&location.protocol==="file:"||r.status>=200&&r.status<300||r.status===304||navigator.userAgent.indexOf("Safari")>-1&&typeof r.status==="undefined"){t(r.responseText)}else{n()}document.documentElement.style.cursor="";r=null}};r.send("")};var l=function(t){t=t.replace(e.REDUNDANT_COMPONENTS,"");t=t.replace(e.REDUNDANT_WHITESPACE,"$1");t=t.replace(e.WHITESPACE_IN_PARENTHESES,"($1)");t=t.replace(e.MORE_WHITESPACE," ");t=t.replace(e.FINAL_SEMICOLONS,"}");return t};var c={stylesheet:function(t){var n={};var r=[],i=[],s=[],o=[];var u=t.cssHelperText;var a=t.getAttribute("media");if(a){var f=a.toLowerCase().split(",")}else{var f=["all"]}for(var l=0;l<f.length;l++){r[r.length]=c.mediaQuery(f[l],n)}var h=u.match(e.BLOCKS);if(h!==null){for(var l=0;l<h.length;l++){if(h[l].substring(0,7)==="@media "){var p=c.mediaQueryList(h[l],n);s=s.concat(p.getRules());i[i.length]=p}else{s[s.length]=o[o.length]=c.rule(h[l],n,null)}}}n.element=t;n.getCssText=function(){return u};n.getAttrMediaQueries=function(){return r};n.getMediaQueryLists=function(){return i};n.getRules=function(){return s};n.getRulesWithoutMQ=function(){return o};return n},mediaQueryList:function(t,n){var r={};var i=t.indexOf("{");var s=t.substring(0,i);t=t.substring(i+1,t.length-1);var o=[],u=[];var a=s.toLowerCase().substring(7).split(",");for(var f=0;f<a.length;f++){o[o.length]=c.mediaQuery(a[f],r)}var l=t.match(e.BLOCKS_INSIDE);if(l!==null){for(f=0;f<l.length;f++){u[u.length]=c.rule(l[f],n,r)}}r.type="mediaQueryList";r.getMediaQueries=function(){return o};r.getRules=function(){return u};r.getListText=function(){return s};r.getCssText=function(){return t};return r},mediaQuery:function(t,n){t=t||"";var r,i;if(n.type==="mediaQueryList"){r=n}else{i=n}var s=false,o;var u=[];var a=true;var f=t.match(e.NOT_WHITESPACE);for(var l=0;l<f.length;l++){var c=f[l];if(!o&&(c==="not"||c==="only")){if(c==="not"){s=true}}else if(!o){o=c}else if(c.charAt(0)==="("){var h=c.substring(1,c.length-1).split(":");u[u.length]={mediaFeature:h[0],value:h[1]||null}}}return{getQueryText:function(){return t},getAttrStyleSheet:function(){return i||null},getList:function(){return r||null},getValid:function(){return a},getNot:function(){return s},getMediaType:function(){return o},getExpressions:function(){return u}}},rule:function(e,t,n){var r={};var i=e.indexOf("{");var s=e.substring(0,i);var o=s.split(",");var u=[];var a=e.substring(i+1,e.length-1).split(";");for(var f=0;f<a.length;f++){u[u.length]=c.declaration(a[f],r)}r.getStylesheet=function(){return t||null};r.getMediaQueryList=function(){return n||null};r.getSelectors=function(){return o};r.getSelectorText=function(){return s};r.getDeclarations=function(){return u};r.getPropertyValue=function(e){for(var t=0;t<u.length;t++){if(u[t].getProperty()===e){return u[t].getValue()}}return null};return r},declaration:function(e,t){var n=e.indexOf(":");var r=e.substring(0,n);var i=e.substring(n+1);return{getRule:function(){return t||null},getProperty:function(){return r},getValue:function(){return i}}}};var h=function(e){if(typeof e.cssHelperText!=="string"){return}var n={stylesheet:null,mediaQueryLists:[],rules:[],selectors:{},declarations:[],properties:{}};var r=n.stylesheet=c.stylesheet(e);var s=n.mediaQueryLists=r.getMediaQueryLists();var o=n.rules=r.getRules();var u=n.selectors;var a=function(e){var t=e.getSelectors();for(var n=0;n<t.length;n++){var r=t[n];if(!u[r]){u[r]=[]}u[r][u[r].length]=e}};for(i=0;i<o.length;i++){a(o[i])}var f=n.declarations;for(i=0;i<o.length;i++){f=n.declarations=f.concat(o[i].getDeclarations())}var l=n.properties;for(i=0;i<f.length;i++){var h=f[i].getProperty();if(!l[h]){l[h]=[]}l[h][l[h].length]=f[i]}e.cssHelperParsed=n;t[t.length]=e;return n};var p=function(e,t){return;e.cssHelperText=l(t||e.innerHTML);return h(e)};var d=function(){n=true;t=[];var r=[];var i=function(){for(var e=0;e<r.length;e++){h(r[e])}var t=document.getElementsByTagName("style");for(e=0;e<t.length;e++){p(t[e])}n=false;o()};var s=document.getElementsByTagName("link");for(var u=0;u<s.length;u++){var a=s[u];if(a.getAttribute("rel").indexOf("style")>-1&&a.href&&a.href.length!==0&&!a.disabled){r[r.length]=a}}if(r.length>0){var c=0;var d=function(){c++;if(c===r.length){i()}};var v=function(t){var n=t.href;f(n,function(r){r=l(r).replace(e.RELATIVE_URLS,"url("+n.substring(0,n.lastIndexOf("/"))+"/$1)");t.cssHelperText=r;d()},d)};for(u=0;u<r.length;u++){v(r[u])}}else{i()}};var v={stylesheets:"array",mediaQueryLists:"array",rules:"array",selectors:"object",declarations:"array",properties:"object"};var m={stylesheets:null,mediaQueryLists:null,rules:null,selectors:null,declarations:null,properties:null};var g=function(e,t){if(m[e]!==null){if(v[e]==="array"){return m[e]=m[e].concat(t)}else{var n=m[e];for(var r in t){if(t.hasOwnProperty(r)){if(!n[r]){n[r]=t[r]}else{n[r]=n[r].concat(t[r])}}}return n}}};var y=function(e){m[e]=v[e]==="array"?[]:{};for(var n=0;n<t.length;n++){var r=e==="stylesheets"?"stylesheet":e;g(e,t[n].cssHelperParsed[r])}return m[e]};var b=function(e){if(typeof window.innerWidth!="undefined"){return window["inner"+e]}else if(typeof document.documentElement!=="undefined"&&typeof document.documentElement.clientWidth!=="undefined"&&document.documentElement.clientWidth!=0){return document.documentElement["client"+e]}};return{addStyle:function(e,t,n){var r=document.createElement("style");r.setAttribute("type","text/css");if(t&&t.length>0){r.setAttribute("media",t.join(","))}document.getElementsByTagName("head")[0].appendChild(r);if(r.styleSheet){r.styleSheet.cssText=e}else{r.appendChild(document.createTextNode(e))}r.addedWithCssHelper=true;if(typeof n==="undefined"||n===true){cssHelper.parsed(function(t){var n=p(r,e);for(var i in n){if(n.hasOwnProperty(i)){g(i,n[i])}}a("newStyleParsed",r)})}else{r.parsingDisallowed=true}return r},removeStyle:function(e){return e.parentNode.removeChild(e)},parsed:function(e){if(n){s(e)}else{if(typeof t!=="undefined"){if(typeof e==="function"){e(t)}}else{s(e);d()}}},stylesheets:function(e){cssHelper.parsed(function(t){e(m.stylesheets||y("stylesheets"))})},mediaQueryLists:function(e){cssHelper.parsed(function(t){e(m.mediaQueryLists||y("mediaQueryLists"))})},rules:function(e){cssHelper.parsed(function(t){e(m.rules||y("rules"))})},selectors:function(e){cssHelper.parsed(function(t){e(m.selectors||y("selectors"))})},declarations:function(e){cssHelper.parsed(function(t){e(m.declarations||y("declarations"))})},properties:function(e){cssHelper.parsed(function(t){e(m.properties||y("properties"))})},broadcast:a,addListener:function(e,t){if(typeof t==="function"){if(!u[e]){u[e]={listeners:[]}}u[e].listeners[u[e].listeners.length]=t}},removeListener:function(e,t){if(typeof t==="function"&&u[e]){var n=u[e].listeners;for(var r=0;r<n.length;r++){if(n[r]===t){n.splice(r,1);r-=1}}}},getViewportWidth:function(){return b("Width")},getViewportHeight:function(){return b("Height")}}}();domReady(function(){var t;var n={LENGTH_UNIT:/[0-9]+(em|ex|px|in|cm|mm|pt|pc)$/,RESOLUTION_UNIT:/[0-9]+(dpi|dpcm)$/,ASPECT_RATIO:/^[0-9]+\/[0-9]+$/,ABSOLUTE_VALUE:/^[0-9]*(\.[0-9]+)*$/};var r=[];var i=function(){var e="css3-mediaqueries-test";var t=document.createElement("div");t.id=e;var n=cssHelper.addStyle("@media all and (width) { #"+e+" { width: 1px !important; } }",[],false);document.body.appendChild(t);var r=t.offsetWidth===1;n.parentNode.removeChild(n);t.parentNode.removeChild(t);i=function(){return r};return r};var s=function(){t=document.createElement("div");t.style.cssText="position:absolute;top:-9999em;left:-9999em;"+"margin:0;border:none;padding:0;width:1em;font-size:1em;";document.body.appendChild(t);if(t.offsetWidth!==16){t.style.fontSize=16/t.offsetWidth+"em"}t.style.width=""};var o=function(e){t.style.width=e;var n=t.offsetWidth;t.style.width="";return n};var u=function(e,t){var r=e.length;var i=e.substring(0,4)==="min-";var s=!i&&e.substring(0,4)==="max-";if(t!==null){var u;var a;if(n.LENGTH_UNIT.exec(t)){u="length";a=o(t)}else if(n.RESOLUTION_UNIT.exec(t)){u="resolution";a=parseInt(t,10);var f=t.substring((a+"").length)}else if(n.ASPECT_RATIO.exec(t)){u="aspect-ratio";a=t.split("/")}else if(n.ABSOLUTE_VALUE){u="absolute";a=t}else{u="unknown"}}var l,c;if("device-width"===e.substring(r-12,r)){l=screen.width;if(t!==null){if(u==="length"){return i&&l>=a||s&&l<a||!i&&!s&&l===a}else{return false}}else{return l>0}}else if("device-height"===e.substring(r-13,r)){c=screen.height;if(t!==null){if(u==="length"){return i&&c>=a||s&&c<a||!i&&!s&&c===a}else{return false}}else{return c>0}}else if("width"===e.substring(r-5,r)){l=document.documentElement.clientWidth||document.body.clientWidth;if(t!==null){if(u==="length"){return i&&l>=a||s&&l<a||!i&&!s&&l===a}else{return false}}else{return l>0}}else if("height"===e.substring(r-6,r)){c=document.documentElement.clientHeight||document.body.clientHeight;if(t!==null){if(u==="length"){return i&&c>=a||s&&c<a||!i&&!s&&c===a}else{return false}}else{return c>0}}else if("device-aspect-ratio"===e.substring(r-19,r)){return u==="aspect-ratio"&&screen.width*a[1]===screen.height*a[0]}else if("color-index"===e.substring(r-11,r)){var h=Math.pow(2,screen.colorDepth);if(t!==null){if(u==="absolute"){return i&&h>=a||s&&h<a||!i&&!s&&h===a}else{return false}}else{return h>0}}else if("color"===e.substring(r-5,r)){var p=screen.colorDepth;if(t!==null){if(u==="absolute"){return i&&p>=a||s&&p<a||!i&&!s&&p===a}else{return false}}else{return p>0}}else if("resolution"===e.substring(r-10,r)){var d;if(f==="dpcm"){d=o("1cm")}else{d=o("1in")}if(t!==null){if(u==="resolution"){return i&&d>=a||s&&d<a||!i&&!s&&d===a}else{return false}}else{return d>0}}else{return false}};var a=function(e){var t=e.getValid();var n=e.getExpressions();var r=n.length;if(r>0){for(var i=0;i<r&&t;i++){t=u(n[i].mediaFeature,n[i].value)}var s=e.getNot();return t&&!s||s&&!t}return t};var f=function(e,t){var n=e.getMediaQueries();var i={};for(var s=0;s<n.length;s++){var o=n[s].getMediaType();if(n[s].getExpressions().length===0){continue}var u=true;if(o!=="all"&&t&&t.length>0){u=false;for(var f=0;f<t.length;f++){if(t[f]===o){u=true}}}if(u&&a(n[s])){i[o]=true}}var l=[],c=0;for(var h in i){if(i.hasOwnProperty(h)){if(c>0){l[c++]=","}l[c++]=h}}if(l.length>0){r[r.length]=cssHelper.addStyle("@media "+l.join("")+"{"+e.getCssText()+"}",t,false)}};var l=function(e,t){for(var n=0;n<e.length;n++){f(e[n],t)}};var c=function(e){var t=e.getAttrMediaQueries();var n=false;var i={};for(var s=0;s<t.length;s++){if(a(t[s])){i[t[s].getMediaType()]=t[s].getExpressions().length>0}}var o=[],u=[];for(var f in i){if(i.hasOwnProperty(f)){o[o.length]=f;if(i[f]){u[u.length]=f}if(f==="all"){n=true}}}if(u.length>0){r[r.length]=cssHelper.addStyle(e.getCssText(),u,false)}var c=e.getMediaQueryLists();if(n){l(c)}else{l(c,o)}};var h=function(e){for(var t=0;t<e.length;t++){c(e[t])}if(ua.ie){document.documentElement.style.display="block";setTimeout(function(){document.documentElement.style.display=""},0);setTimeout(function(){cssHelper.broadcast("cssMediaQueriesTested")},100)}else{cssHelper.broadcast("cssMediaQueriesTested")}};var p=function(){for(var e=0;e<r.length;e++){cssHelper.removeStyle(r[e])}r=[];cssHelper.stylesheets(h)};var d=0;var v=function(){var e=cssHelper.getViewportWidth();var t=cssHelper.getViewportHeight();if(ua.ie){var n=document.createElement("div");n.style.position="absolute";n.style.top="-9999em";n.style.overflow="scroll";document.body.appendChild(n);d=n.offsetWidth-n.clientWidth;document.body.removeChild(n)}var r;var s=function(){var n=cssHelper.getViewportWidth();var s=cssHelper.getViewportHeight();if(Math.abs(n-e)>d||Math.abs(s-t)>d){e=n;t=s;clearTimeout(r);r=setTimeout(function(){if(!i()){p()}else{cssHelper.broadcast("cssMediaQueriesTested")}},500)}};window.onresize=function(){var e=window.onresize||function(){};return function(){e();s()}}()};var m=document.documentElement;m.style.marginLeft="-32767px";setTimeout(function(){m.style.marginLeft=""},5e3);return function(){if(!i()){cssHelper.addListener("newStyleParsed",function(e){c(e.cssHelperParsed.stylesheet)});cssHelper.addListener("cssMediaQueriesTested",function(){if(ua.ie){m.style.width="1px"}setTimeout(function(){m.style.width="";m.style.marginLeft=""},0);cssHelper.removeListener("cssMediaQueriesTested",arguments.callee)});s();p()}else{m.style.marginLeft=""}v()}}());try{document.execCommand("BackgroundImageCache",false,true)}catch(e){};

(function(l,f){function m(){var a=e.elements;return"string"==typeof a?a.split(" "):a}function i(a){var b=n[a[o]];b||(b={},h++,a[o]=h,n[h]=b);return b}function p(a,b,c){b||(b=f);if(g)return b.createElement(a);c||(c=i(b));b=c.cache[a]?c.cache[a].cloneNode():r.test(a)?(c.cache[a]=c.createElem(a)).cloneNode():c.createElem(a);return b.canHaveChildren&&!s.test(a)?c.frag.appendChild(b):b}function t(a,b){if(!b.cache)b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag();a.createElement=function(c){return!e.shivMethods?b.createElem(c):p(c,a,b)};a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){b.createElem(a);b.frag.createElement(a);return'c("'+a+'")'})+");return n}")(e,b.frag)}function q(a){a||(a=f);var b=i(a);if(e.shivCSS&&!j&&!b.hasCSS){var c,d=a;c=d.createElement("p");d=d.getElementsByTagName("head")[0]||d.documentElement;c.innerHTML="x<style>article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}</style>";c=d.insertBefore(c.lastChild,d.firstChild);b.hasCSS=!!c}g||t(a,b);return a}var k=l.html5||{},s=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,r=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,j,o="_html5shiv",h=0,n={},g;(function(){try{var a=f.createElement("a");a.innerHTML="<xyz></xyz>";j="hidden"in a;var b;if(!(b=1==a.childNodes.length)){f.createElement("a");var c=f.createDocumentFragment();b="undefined"==typeof c.cloneNode||"undefined"==typeof c.createDocumentFragment||"undefined"==typeof c.createElement}g=b}catch(d){g=j=!0}})();var e={elements:k.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==k.shivCSS,supportsUnknownElements:g,shivMethods:!1!==k.shivMethods,type:"default",shivDocument:q,createElement:p,createDocumentFragment:function(a,b){a||(a=f);if(g)return a.createDocumentFragment();for(var b=b||i(a),c=b.frag.cloneNode(),d=0,e=m(),h=e.length;d<h;d++)c.createElement(e[d]);return c}};l.html5=e;q(f)})(this,document);
/*! Respond.js v1.4.2: min/max-width media query polyfill * Copyright 2013 Scott Jehl
 * Licensed under https://github.com/scottjehl/Respond/blob/master/LICENSE-MIT
 *  */

!function(a){"use strict";a.matchMedia=a.matchMedia||function(a){var b,c=a.documentElement,d=c.firstElementChild||c.firstChild,e=a.createElement("body"),f=a.createElement("div");return f.id="mq-test-1",f.style.cssText="position:absolute;top:-100em",e.style.background="none",e.appendChild(f),function(a){return f.innerHTML='&shy;<style media="'+a+'"> #mq-test-1 { width: 42px; }</style>',c.insertBefore(e,d),b=42===f.offsetWidth,c.removeChild(e),{matches:b,media:a}}}(a.document)}(this),function(a){"use strict";function b(){u(!0)}var c={};a.respond=c,c.update=function(){};var d=[],e=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}(),f=function(a,b){var c=e();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))};if(c.ajax=f,c.queue=d,c.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\([\s]*min\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/,maxw:/\([\s]*max\-width\s*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/},c.mediaQueriesSupported=a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,!c.mediaQueriesSupported){var g,h,i,j=a.document,k=j.documentElement,l=[],m=[],n=[],o={},p=30,q=j.getElementsByTagName("head")[0]||k,r=j.getElementsByTagName("base")[0],s=q.getElementsByTagName("link"),t=function(){var a,b=j.createElement("div"),c=j.body,d=k.style.fontSize,e=c&&c.style.fontSize,f=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",c||(c=f=j.createElement("body"),c.style.background="none"),k.style.fontSize="100%",c.style.fontSize="100%",c.appendChild(b),f&&k.insertBefore(c,k.firstChild),a=b.offsetWidth,f?k.removeChild(c):c.removeChild(b),k.style.fontSize=d,e&&(c.style.fontSize=e),a=i=parseFloat(a)},u=function(b){var c="clientWidth",d=k[c],e="CSS1Compat"===j.compatMode&&d||j.body[c]||d,f={},o=s[s.length-1],r=(new Date).getTime();if(b&&g&&p>r-g)return a.clearTimeout(h),h=a.setTimeout(u,p),void 0;g=r;for(var v in l)if(l.hasOwnProperty(v)){var w=l[v],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?i||t():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?i||t():1)),w.hasquery&&(z&&A||!(z||e>=x)||!(A||y>=e))||(f[w.media]||(f[w.media]=[]),f[w.media].push(m[w.rules]))}for(var C in n)n.hasOwnProperty(C)&&n[C]&&n[C].parentNode===q&&q.removeChild(n[C]);n.length=0;for(var D in f)if(f.hasOwnProperty(D)){var E=j.createElement("style"),F=f[D].join("\n");E.type="text/css",E.media=D,q.insertBefore(E,o.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(j.createTextNode(F)),n.push(E)}},v=function(a,b,d){var e=a.replace(c.regex.keyframes,"").match(c.regex.media),f=e&&e.length||0;b=b.substring(0,b.lastIndexOf("/"));var g=function(a){return a.replace(c.regex.urls,"$1"+b+"$2$3")},h=!f&&d;b.length&&(b+="/"),h&&(f=1);for(var i=0;f>i;i++){var j,k,n,o;h?(j=d,m.push(g(a))):(j=e[i].match(c.regex.findStyles)&&RegExp.$1,m.push(RegExp.$2&&g(RegExp.$2))),n=j.split(","),o=n.length;for(var p=0;o>p;p++)k=n[p],l.push({media:k.split("(")[0].match(c.regex.only)&&RegExp.$2||"all",rules:m.length-1,hasquery:k.indexOf("(")>-1,minw:k.match(c.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:k.match(c.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}u()},w=function(){if(d.length){var b=d.shift();f(b.href,function(c){v(c,b.href,b.media),o[b.href]=!0,a.setTimeout(function(){w()},0)})}},x=function(){for(var b=0;b<s.length;b++){var c=s[b],e=c.href,f=c.media,g=c.rel&&"stylesheet"===c.rel.toLowerCase();e&&g&&!o[e]&&(c.styleSheet&&c.styleSheet.rawCssText?(v(c.styleSheet.rawCssText,e,f),o[e]=!0):(!/^([a-zA-Z:]*\/\/)/.test(e)&&!r||e.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&("//"===e.substring(0,2)&&(e=a.location.protocol+e),d.push({href:e,media:f})))}w()};x(),c.update=x,c.getEmValue=t,a.addEventListener?a.addEventListener("resize",b,!1):a.attachEvent&&a.attachEvent("onresize",b)}}(this);

function QuerySuggest(textbox,settings){this.settings=jQuery.extend(this.defaultSettings(),settings);this.textBoxId=$(textbox).attr('id');this.suggestId=this.textBoxId+"_querySuggest";this.queryExecutions={};this.emptyExecution=null;this.queryTexts=[];this.delayTimer=0;this.clearTimer=0;this.autoHide=true;this.pendingQuery=null;this.anotherPending=null;}
jQuery.fn.querySuggest=function(settings){return this.each(function(i,textbox){var querySuggest=new QuerySuggest(textbox,settings);$(textbox).focus(function(e){return querySuggest.enableSuggest(e);});$(textbox).blur(function(e){return querySuggest.disableSuggest(e);});$(textbox).keyup(function(e){return querySuggest.digestInput(e);});$(textbox).bind('paste',function(e){setTimeout(function(){return querySuggest.digestInput();},30);});$(textbox).after('<div id="'+querySuggest.suggestId+'" class="'+querySuggest.settings.cssClass+'" '+'style="display:none;">'+'</div>');$('#'+querySuggest.suggestId).click(function(e){querySuggest.autoHide=false;querySuggest.manualClose();});textbox.querySuggest=querySuggest;});};jQuery.fn.getQuerySuggest=function(){if(this.length==0){return null;}
var textbox=this[0];return textbox.querySuggest;};QuerySuggest.prototype.defaultSettings=function(){return{width:600,cssClass:'querySuggest',delay:800,align:'center',cacheSize:10,minQuerySize:1,maxQuerySize:500,condensed:false,initQuery:true,limit:6,present:function(querySuggest,suggestId,suggestions,query){QuerySuggest.prototype.defaultPresent(querySuggest,suggestId,suggestions,query);},empty:function(querySuggest,suggestId){QuerySuggest.prototype.defaultEmpty(querySuggest,suggestId);},queryUrl:function(query,querySuggest){return"";}};};QuerySuggest.prototype.enableSuggest=function(){this.autoHide=true;this.querySuggestions();};QuerySuggest.prototype.disableSuggest=function(){var sid=this.suggestId;var querySuggest=this;setTimeout(function(){if(querySuggest.autoHide){$('#'+sid).hide();}},200);};QuerySuggest.prototype.manualClose=function(){if(!$('#suggestClose_'+this.suggestId).html()){$('#'+this.suggestId).append("<div class='Close_SearchSuggestionWindow' id='suggestClose_"+this.suggestId+"'>"+"<a href='#' onclick='$(\"#"+this.suggestId+"\").hide();return false;'>close <span class='glyphicon glyphicon-remove'></span></a>"+"</div>");}};QuerySuggest.prototype.digestInput=function(){var input=$('#'+this.textBoxId).val();var qs=this;if(this.clearTimer===0){this.clearTimer=setTimeout(function(){qs.emptySuggestions();},this.settings.delay*1.2);}
if(this.delayTimer!==0){clearTimeout(this.delayTimer);this.delayTimer=0;}
if(!input||(input.length<this.settings.minQuerySize)||(input.length>this.settings.maxQuerySize)){$('#'+this.suggestId).hide();return;}
this.delayTimer=setTimeout(function(){qs.querySuggestions();},this.settings.delay);};QuerySuggest.prototype.emptySuggestions=function(){this.clearTimer=0;if(this.delayTimer!==0){return;}
this.settings.empty(this,this.suggestId);};QuerySuggest.prototype.querySuggestions=function(){this.delayTimer=0;var input=$('#'+this.textBoxId).val();if(input.length<this.settings.minQuerySize){input="";}
if(!this.settings.initQuery&&(input.length<this.settings.minQuerySize)){$('#'+this.suggestId).hide();return;}
if(this.pendingQuery){if(!this.anotherPending||new Date().getTime()-this.anotherPending>2000){this.anotherPending=new Date().getTime();return;}}
this.anotherPending=null;this.pendingQuery=input;this.pendingUrl=this.settings.queryUrl(this.pendingQuery,this);if(this.pendingUrl==null){this.pendingQuery=null;$('#'+this.suggestId).hide();return;}
var cachedSuggestions=this.queryExecutions[this.pendingUrl];if(!this.pendingQuery){cachedSuggestions=this.emptyExecution;}
if(cachedSuggestions!==undefined&&cachedSuggestions!==null){this.giveSuggestions(cachedSuggestions);}else{this.requestSuggestions();}};QuerySuggest.prototype.requestSuggestions=function(){var qs=this;var qr=this.pendingQuery;var url=this.pendingUrl;$.getJSON(this.pendingUrl,function(data){qs.pendingQuery=qr;qs.pendingUrl=url;qs.giveSuggestions(data);if(qs.anotherPending){qs.querySuggestions();}});};QuerySuggest.prototype.giveSuggestions=function(suggestions){if(suggestions!==undefined&&suggestions!=null){this.cacheSuggestions(this.pendingQuery,this.pendingUrl,suggestions);}
var qr=this.pendingQuery;this.pendingQuery=null;this.pendingUrl=null;if(this.clearTimer!==0){clearTimeout(this.clearTimer);this.clearTimer=0;}
if(qr==$('#'+this.textBoxId).val()){this.settings.present(this,this.suggestId,suggestions,qr);if(suggestions&&suggestions.length){$('#'+this.suggestId).show();}else{$('#'+this.suggestId).hide();}}else{$('#'+this.suggestId).hide();}};QuerySuggest.prototype.cacheSuggestions=function(queryText,queryUrl,suggestions){if(!queryText){this.emptyExecution=suggestions;return;}
if(this.queryExecutions[queryUrl]){var index=0;for(index=0;index<this.queryTexts.length;index++){if(this.queryTexts[index]===queryUrl){break;}}
if(index!==this.queryTexts.length){this.queryTexts.splice(index,1);}}
if(this.queryTexts.length>this.settings.cacheSize){this.queryExecutions[this.queryTexts[0]]=null;this.queryTexts.splice(0,1);}
this.queryTexts.push(queryUrl);this.queryExecutions[queryUrl]=suggestions;};QuerySuggest.prototype.defaultEmpty=function(querySuggest,suggestId){if(querySuggest.settings.initQuery){if(querySuggest.emptyExecution){querySuggest.settings.present(querySuggest,suggestId,querySuggest.emptyExecution,"");}else{querySuggest.querySuggestions();}}else{$('#'+suggestId).html("");}};QuerySuggest.prototype.defaultPresent=function(querySuggest,suggestId,suggestions,query){var html="";var i=0,j=0;if(suggestions){for(i=0;i<suggestions.length;i++){var suggestion=suggestions[i];html+="<div>"+suggestion.name+"<ul>";for(j=0;j<suggestion.matches.length;j++){var match=suggestion.matches[j];html+="<li><a href='"+match.url+"'>"+match.label+"</a>";}
html+="</ul></div>";}
$('#'+suggestId).html(html);}else{querySuggest.settings.empty(querySuggest,suggestId);}};

$(document).ready(function(){$('#mypdb_loginMenu').hide();$('#mypdb_userMenu').hide();if(!window.sessionInfo){$.ajax({url:'/pdb/json/sessionInfo.do'+(document.pdbQueryId?('?qrid='+document.pdbQueryId):''),dataType:'json',success:function(data){if(data.structureId||data.hetId){if(data.structureId){$('#queryStructureHref').attr('href','/pdb/explore/explore.do?structureId='+data.structureId);$('#queryStructureHref').html(data.structureId);$('#queryStructureDiv').show();}
if(data.hetId){$('#queryLigandHref').attr('href','/pdb/ligand/ligandsummary.do?hetId='+data.hetId);$('#queryLigandHref').html(data.hetId);$('#queryHetDiv').show();}
$('#queryExplorerDiv').show();}
if(!document.pdbQueryId&&data.queryId){document.pdbQueryId=data.queryId;}
if(document.pdbQueryId){var queryResultsLinkHref=$('#queryResultsLink').attr('href');if(queryResultsLinkHref&&queryResultsLinkHref.indexOf('qrid')==-1){$('#queryResultsLink').attr('href',queryResultsLinkHref+"&qrid="+document.pdbQueryId);}
var queryDetailsLinkHref=$('#queryDetailsLink').attr('href');if(queryDetailsLinkHref&&queryDetailsLinkHref.indexOf('qrid')==-1){$('#queryDetailsLink').attr('href',queryDetailsLinkHref+"?qrid="+document.pdbQueryId);}}
if(data.user){var queryHistLink=$('#queryHistoryLink').parent();var queryResLink=$('#queryResultsLink').parent();$('#mypdb_userMenu .leftMenu_list li:first-child').after(queryHistLink);$('#mypdb_userMenu .leftMenu_list li:first-child').after(queryResLink);$('#mypdb_userMenu').show();$('#mypdb_loginMenu').remove();$('#mypdb_userVal').html(data.user);if(data.user=="Admin"){$('#mypdb_adminMenu').show();}else{$('#mypdb_adminMenu').remove();}}
else{$('#mypdb_loginMenu').show();$('#mypdb_userMenu').remove();$('#mypdb_adminMenu').remove();}
if(data.queryCount){$('#queryResultCountDiv').attr("title",data.lastQuery);$('#queryResultCountDiv').addClass("tooltip");$('.queryResultCountValSpan').html(" ("+data.resultCount+")");$('.queryCountValSpan').html(" ("+data.queryCount+")");$('#SearchBarHistory').removeClass('hide');$('#SearchBarPreviousResults').removeClass('hide');}
else{$('#queryHistoryLink').css('display','none');$('#queryResultsLink').css('display','none');}
window.sessionInfo=data;}});window.sessionInfo={};var prevUrl;if(!(window.location.pathname+window.location.search).match("/pdb/admin/Logon.do")){prevUrl=window.location.pathname+window.location.search;}
else{prevUrl=$("#logon_previousRequestUrl").val();}
$("#lhm_mypdb_previousRequestUrl").val(prevUrl);}
$("#lhm_mypdb_logoff").attr("href","/pdb/Logoff.do");});

triggeredSubmit=false;function markQuery(lbl,query){var lbli=lbl.toLowerCase().indexOf(query.toLowerCase());if(lbli!==-1&&query!="b"){return lbl.substr(0,lbli)+"<b>"+lbl.substr(lbli,query.length)+"</b>"+lbl.substr(lbli+query.length);}
var words=query.replace(/-/g," ").split(" ");var i;if(words.length>1){for(i=0;i<words.length;i++){lbl=markQuery(lbl,words[i]);}}
return lbl;}
function focusSuggest(textBoxId,itemId){var querySuggest=$('#'+textBoxId).getQuerySuggest();querySuggest.itemId=itemId;querySuggest.settings.limit=47;querySuggest.querySuggestions();}
function reSuggest(textBoxId){var querySuggest=$('#'+textBoxId).getQuerySuggest();querySuggest.querySuggestions();}
function presentSuggestionsInSearchBar(querySuggest,suggestId,suggestions,query){var drillHTML="",optsHTML="";var gci=0,pc=0,cn=0,ccn;var vls="",lbls="";var contextLbl=ContextLabels[suggestId.replace("_querySuggest","")];var contextLabel=contextLbl?contextLbl:suggestId;var browseClass={'Author':'authorProfileIcon'};if(!querySuggest.popupCounter){querySuggest.popupCounter=0;}
querySuggest.popupCounter++;$('#tiptip_holder').hide();$.each(suggestions,function(i,item){if(item.suggestions.length<=0){return true;}
vls="";lbls="";optsHTML="";gci=0;ccn=0;$.each(item.suggestions,function(j,group){pc=Math.round(1000*group.percent)/10;if(!group.abbreviation){group.abbreviation=group.label;}
var lbl=markQuery(group.label,query);var abv=markQuery(group.abbreviation,query);var tooltip=(group.label!==group.abbreviation?lbl.replace(/'/g,"&#39;"):null);if(group.percent){tooltip=pc+"% "+lbl+" ("+group.population+" hits)";}
var evt=((group.url.indexOf("?")==-1)?"?":"&")+"evtc=Suggest&evta="+item.name.replace(" ","")+"&evtl="+contextLabel;if(tooltip){var titleTooltip=tooltip.replace("<b>","")
titleTooltip=titleTooltip.replace("</b>","")}
optsHTML+="<li "+(tooltip?("title='"+titleTooltip+"'"):"")+" class='querySuggestGroup"+(tooltip?" mantooltip":"")+(!group.isEnabled?" suggestNotFocus":"")+"' style='white-space:nowrap;'>";optsHTML+="<a class='groupLabel' id='drill_"+i+"_"+(pc>0?(gci+""):(j+"_n"))+"return true;' "+"href='"+group.url+evt+"' onclick=''>";optsHTML+=abv;optsHTML+=(group.population?" ("+group.population+")":"");optsHTML+=(group.url?"</a>":"");if(group.redirectUrl){var iconClass="icon-taxonomy";if(browseClass[item.id]){iconClass=browseClass[item.id];}else
optsHTML+="<a href='"+group.redirectUrl+"'>&nbsp;<i class='fa fa-sitemap'></i></a>";}
optsHTML+="</li>";vls+=(gci>0?",":"")+pc;var slbl=group.abbreviation;if(slbl.length>35){slbl=slbl.substring(0,32)+"...";}
lbls+=(gci>0?"|":"")+pc+"% "+slbl+" ("+group.population+" hits)";gci++;if(gci%12==0)
optsHTML+="</ul><ul>";ccn++;});if(ccn>cn){cn=ccn;}
if(cn>12){cn=12;}
var sgname=item.name;drillHTML+="<div class='suggestgroup'><h5>"+sgname+"</h5>";drillHTML+="<ul>";drillHTML+=optsHTML;if(item.allUrl||item.moreResults||querySuggest.itemId){drillHTML+="<li class='querySuggestAll' >";var leftHTML="",rightHTML="";if(item.moreResults&&!querySuggest.itemId)
leftHTML+="<a style='float:left' href='#' onclick='focusSuggest(\""+querySuggest.textBoxId+"\",\""+item.id+"\");"+"return false;'>More</a>";if(querySuggest.itemId)
leftHTML+="<a style='float:left' href='#' onclick='reSuggest(\""+querySuggest.textBoxId+"\");return false;'>Less</a>";if(item.allUrl&&(item.name.indexOf("Author")==-1)){var evt=((item.allUrl.indexOf("?")==-1)?"?":"&")+"evtc=Suggest&evta="+item.name.replace(" ","")+"All&evtl="+contextLabel;rightHTML+="<a href='"+item.allUrl+evt+"return true;'>Find all</a>";}
if(item.moreResults&&querySuggest.itemId&&!item.allUrl)
rightHTML+="<span>Too many matches</span>";drillHTML+=leftHTML+(leftHTML&&rightHTML?"<span style='float:left'>&nbsp;&nbsp;-&nbsp;&nbsp;</span>":"")+rightHTML;drillHTML+="</li>";}
drillHTML+="</ul>";drillHTML+="</div>";});drillHTML+="<div class='clearHide'>&nbsp</div>";$('#'+suggestId).html(drillHTML);querySuggest.itemId=null;querySuggest.settings.limit=6;if(querySuggest.settings.condensed==false){$("#"+suggestId+" .suggestgroup").css('min-height',(cn*10)+130+"px");}
querySuggest.manualClose();var fid=querySuggest.fixedItemId;if(!fid){fid='All';}}
ContextLabels={autosearch:'TopBar',othersearch:'OtherOptions',noresults:'NoResults'};$(document).ready(function($){$(function(){$("#autosearch_SearchBar").querySuggest({queryUrl:function(query,querySuggest){if(querySuggest.fixedItemId=="All"){querySuggest.fixedItemId="";}
var url="/pdb/json/autosearch.do?limit="+querySuggest.settings.limit
+"&"+(querySuggest.fixedItemId?("p="+querySuggest.fixedItemId+"&"):(querySuggest.itemId?("p="+querySuggest.itemId+"&"):""))
+"q="+encodeURIComponent(query);return url;},initQuery:false,present:presentSuggestionsInSearchBar,align:'left',delay:200,width:675});});$("#autosearch_SearchBar").keyup(function(e){var querySuggest=$('#autosearch_SearchBar').getQuerySuggest();var val=$('#autosearch_SearchBar').val();});$("#headerQueryForm").submit(function(e){if($('#autosearch_SearchBar').val().length<2){alert('Please enter at least a 2 character search term.');return false;}
var querySuggest=$('#autosearch_SearchBar').getQuerySuggest();var queryVal=$('#autosearch_SearchBar').val();pageTracker._trackEvent('TopBarSubmit',"All",queryVal,querySuggest.popupCounter);triggeredSubmit=true;return true;});});

$(document).ready(function()
{$('.nav>.dropdown').mouseenter(function(event){$(this).addClass("open");});$('.nav>.dropdown').mouseleave(function(event){$('.dropdown').removeClass("open");});});

function xhrPromise(url,responseType){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest();xhr.addEventListener("load",function(){if(xhr.status===200||xhr.status===304){resolve(xhr.response);}else{reject(xhr.status);}},true);xhr.addEventListener("error",function(event){reject(event);},true);xhr.responseType=responseType;xhr.open("GET",url);xhr.send();});}
function retrieveSymmetryData(pdbid,bioassembly){var bionumber=bioassembly2bionumber(bioassembly);var basePath="/pdb/json/symmetryOrientation";var url=basePath+"?pdbID="+pdbid+"&bioassembly="+bionumber;return xhrPromise(url,"json");}
function bionumber2bioassembly(bionumber){if(!bionumber||bionumber==="asym"){return"__AU";}else{return"BU"+bionumber;}}
function bioassembly2bionumber(bioassembly){if(!bioassembly||bioassembly==="__AU"){return"asym";}else{return bioassembly.substr(2);}}
var SymmetryBuffer=function(axes,params){var p=Object.assign({},params);var c=new NGL.Color(p.color||"lime");var radius=p.radius||0.5;var shape=new NGL.Shape("symmetry",{disableImpostor:true,openEnded:true});axes.forEach(function(ax){shape.addSphere(ax.start,c,radius);shape.addSphere(ax.end,c,radius);shape.addCylinder(ax.start,ax.end,c,radius);});this.attach=function(component){shapeRepr=component.addBufferRepresentation(shape.getBufferList());};this.dispose=function(){if(shapeRepr)shapeRepr.dispose();};};var NglController=function(id,params){var signals={taskCountChanged:new NGL.Signal(),fullscreenChanged:new NGL.Signal(),structureChanged:new NGL.Signal(),symmetryDataLoaded:new NGL.Signal(),colorSchemeChanged:new NGL.Signal(),modelChanged:new NGL.Signal(),hydrogenVisibilityChanged:new NGL.Signal(),ionVisibilityChanged:new NGL.Signal(),waterVisibilityChanged:new NGL.Signal(),qualityChanged:new NGL.Signal(),assemblyChanged:new NGL.Signal(),symmetryChanged:new NGL.Signal(),styleChanged:new NGL.Signal(),ligandStyleChanged:new NGL.Signal(),clicked:new NGL.Signal(),hovered:new NGL.Signal()};var pdbid;var structureComponent;var symmetryBuffer;var symmetryData={};var atomCount;var instanceCount;var axesRepr;var isBackboneOnly;var p=Object.assign({},params);var colorScheme=p.colorScheme||"chainname";var assembly=p.assembly||"BU1";var style=p.style||"cartoon";var ligandStyle=p.ligandStyle||"spacefill";var model=p.model||0;var symmetry=p.symmetry||0;var hydrogenVisibility=p.hydrogenVisibility===undefined?true:p.hydrogenVisibility;var ionVisibility=p.ionVisibility===undefined?false:p.ionVisibility;var waterVisibility=p.waterVisibility===undefined?false:p.waterVisibility;var quality=p.quality===undefined?"auto":p.quality;var spin=p.spin===undefined?false:p.spin;var stage=new NGL.Stage(id,{backgroundColor:"white",hoverTimeout:500});this.stage=stage;stage.signals.fullscreenChanged.add(function(fullscreen){signals.fullscreenChanged.dispatch(fullscreen);});stage.signals.clicked.add(function(pickingData){signals.clicked.dispatch(pickingData);});stage.signals.hovered.add(function(pickingData){signals.hovered.dispatch(pickingData);});window.addEventListener("resize",function(){stage.handleResize();},false);var tasks=new NGL.Counter();tasks.listen(stage.tasks);tasks.signals.countChanged.add(function(delta,count){signals.taskCountChanged.dispatch(delta,count);});setSpin(spin);var polymerReprDict={};var polymerReprDefs={"unitcell":{disableImpostor:true,radiusSegments:16},"cartoon":{colorScheme:function(){return colorScheme;},colorScale:getColorScale,aspectRatio:5,scale:0.7,quality:"custom",subdiv:function(){if(quality==="auto"){if(atomCount<15000){return 12;}else if(atomCount<70000){return 6;}else{return 3;}}else{if(quality==="high"){return 12;}else if(quality==="medium"){return 6;}else{return 3;}}},radialSegments:function(){if(quality==="auto"){if(atomCount<15000){return 20;}else if(atomCount<70000){return 10;}else{return 6;}}else{if(quality==="high"){return 20;}else if(quality==="medium"){return 10;}else{return 6;}}},sele:function(){var sele="";if(model!=="all"){sele+="/"+model;}
return sele;}},"base":{colorScheme:function(){return colorScheme;},colorScale:getColorScale,quality:"custom",sphereDetail:function(){if(quality==="auto"){return atomCount<15000?1:0;}else{if(quality==="high"){return 1;}else if(quality==="medium"){return 1;}else{return 0;}}},radialSegments:function(){if(quality==="auto"){if(atomCount<15000){return 20;}else if(atomCount<70000){return 10;}else{return 5;}}else{if(quality==="high"){return 20;}else if(quality==="medium"){return 10;}else{return 5;}}},sele:function(){var sele="polymer";if(model!=="all"){sele+=" and /"+model;}
return sele;}},"backbone":{lineOnly:function(){if(quality==="auto"){return atomCount>250000;}else{return quality==="low";}},colorScheme:function(){return colorScheme;},colorScale:getColorScale,scale:2.0,sele:function(){var sele="";if(model!=="all"){sele+="/"+model;}
return sele;}},"surface":{colorScheme:function(){return colorScheme;},colorScale:getColorScale,surfaceType:"sas",probeRadius:1.4,useWorker:true,scaleFactor:function(){var sf;if(quality==="low"){sf=0.1;}else if(quality==="medium"){sf=0.7;}else if(quality==="high"){sf=1.7;}else{sf=Math.min(1.5,Math.max(0.1,50000/atomCount));}
return sf;},sele:function(){var sele="polymer";if(model!=="all"){sele+=" and /"+model;}
if(hydrogenVisibility===false){sele+=" and not hydrogen";}
return sele;}},"spacefill":{colorScheme:function(){return colorScheme;},colorScale:getColorScale,quality:"custom",sphereDetail:function(){if(quality==="auto"){return atomCount<15000?1:0;}else{if(quality==="high"){return 1;}else if(quality==="medium"){return 1;}else{return 0;}}},sele:function(){var sele="polymer";if(model!=="all"){sele+=" and /"+model;}
if(hydrogenVisibility===false){sele+=" and not hydrogen";}
return sele;}},"licorice":{colorScheme:function(){return colorScheme;},colorScale:getColorScale,quality:"custom",sphereDetail:function(){if(quality==="auto"){return atomCount<15000?1:0;}else{if(quality==="high"){return 1;}else if(quality==="medium"){return 1;}else{return 0;}}},radialSegments:function(){if(quality==="auto"){if(atomCount<15000){return 20;}else if(atomCount<70000){return 10;}else{return 5;}}else{if(quality==="high"){return 20;}else if(quality==="medium"){return 10;}else{return 5;}}},sele:function(){var sele="polymer";if(model!=="all"){sele+=" and /"+model;}
if(hydrogenVisibility===false){sele+=" and not hydrogen";}
return sele;}}};var ligandReprDict={};var ligandReprDefs={"spacefill":{colorScheme:function(){if(colorScheme==="bfactor"){return colorScheme}else{return"element";}},quality:function(){return"medium";},sele:function(){var sele="not polymer";if(model!=="all"){sele+=" and /"+model;}
if(hydrogenVisibility===false){sele+=" and not hydrogen";}
if(ionVisibility===false){sele+=" and not ion";}
if(waterVisibility===false){sele+=" and not water";}
return sele;}},"ball+stick":{colorScheme:function(){if(colorScheme==="bfactor"){return colorScheme}else{return"element";}},quality:function(){return"medium";},scale:2.5,aspectRatio:1.2,sele:function(){var sele="not polymer";if(model!=="all"){sele+=" and /"+model;}
if(hydrogenVisibility===false){sele+=" and not hydrogen";}
if(ionVisibility===false){sele+=" and not ion";}
if(waterVisibility===false){sele+=" and not water";}
return sele;}}};function evalParam(paramValue){if(typeof paramValue==="function"){return paramValue();}else{return paramValue;}}
function getPolymerParam(reprName,paramName){return evalParam(polymerReprDefs[reprName][paramName]);}
function getLigandParam(reprName,paramName){return evalParam(ligandReprDefs[reprName][paramName]);}
function makeRepresentations(reprDefs,reprDict){if(!structureComponent)return;for(var reprName in reprDefs){var reprParams=reprDefs[reprName];var params={lazy:true,visible:false,assembly:assembly};for(var paramName in reprParams){params[paramName]=evalParam(reprParams[paramName]);}
if(reprDict[reprName]){reprDict[reprName].dispose();}
reprDict[reprName]=structureComponent.addRepresentation(reprName,params);}}
function makeCounts(){var structure=structureComponent.structure;var _assembly=structure.biomolDict[assembly];if(_assembly){atomCount=_assembly.getAtomCount(structure)
if(model!=="all"){atomCount/=structure.modelStore.count;}
instanceCount=_assembly.getInstanceCount();}else{if(model==="all"){atomCount=structure.atomStore.count;}else{atomCount=structure.getModelProxy(0).atomCount;}
instanceCount=1;}
if(typeof window.orientation!=='undefined'){atomCount*=4;}
isBackboneOnly=structure.atomStore.count/structure.residueStore.count<2;if(isBackboneOnly){atomCount*=10;}
console.log("atomCount",atomCount,"instanceCount",instanceCount);}
function setStructure(comp){structureComponent=comp;initStructure();signals.structureChanged.dispatch(structureComponent);}
function initStructure(){if(!structureComponent)return;makeCounts();if(getStyleNames(true)[style]===undefined){style=getDefaultStyle();}
if(getSymmetryNames()[symmetry]===undefined){symmetry=0;}
if(getSymmetryInfo()===undefined){loadSymmetryData(assembly).then(updateSymmetry);}
setSymmetry(symmetry);makeRepresentations(polymerReprDefs,polymerReprDict);makeRepresentations(ligandReprDefs,ligandReprDict);structureComponent.setDefaultAssembly(assembly);axesRepr=structureComponent.addRepresentation("axes",{visible:false});setStyle(style);setLigandStyle(ligandStyle);if(assembly==="UNITCELL"){polymerReprDict["unitcell"].setVisibility(true);}else if(assembly==="SUPERCELL"){setLigandStyle("");}else{axesRepr.repr.align();}
centerView();}
function loadPdbid(_pdbid,_assembly,_reduced){pdbid=_pdbid;symmetryData={};if(symmetryBuffer){symmetryBuffer.dispose();symmetryBuffer=undefined;}
if(_assembly!==undefined){assembly=_assembly;}
var mmtfUrl="rcsb://"+pdbid+(_reduced?".bb":"")+".mmtf";var mmcifUrl="rcsb://"+pdbid+".cif";var params={assembly:assembly,defaultRepresentation:false};return stage.loadFile(mmtfUrl,params).then(setStructure).catch(function(e){console.error(e);return stage.loadFile(mmcifUrl,params).then(setStructure).catch(function(e){console.error(e);});});}
function loadSymmetryData(_assembly){tasks.increment();return retrieveSymmetryData(pdbid,_assembly).then(function(data){tasks.decrement();if(!data||!data.symmetries||!data.symmetries.length){symmetry=-1;}else{data.symmetries=data.symmetries.filter(function(sym){return sym.pointGroup!=="C1";});if(!data.symmetries.length){symmetry=-1;}}
symmetryData[_assembly]=data;signals.symmetryDataLoaded.dispatch(data);}).catch(function(e){tasks.decrement();console.error(e);});}
function updateSelections(){var name;for(name in polymerReprDict){polymerReprDict[name].setSelection(getPolymerParam(name,"sele"));}
for(name in ligandReprDict){ligandReprDict[name].setSelection(getLigandParam(name,"sele"));}}
function setStyle(value){style=value;for(var name in polymerReprDict){if(name==="unitcell"&&assembly==="UNITCELL"){polymerReprDict["unitcell"].setVisibility(true);}else if(name==="base"&&style==="cartoon"){polymerReprDict["base"].setVisibility(true);}else{polymerReprDict[name].setVisibility(name===style);}}
signals.styleChanged.dispatch(style);}
function setLigandStyle(value){ligandStyle=value;for(var name in ligandReprDict){ligandReprDict[name].setVisibility(name===ligandStyle);}
signals.ligandStyleChanged.dispatch(ligandStyle);}
function setColorScheme(value){colorScheme=value;for(var name in polymerReprDict){polymerReprDict[name].setParameters({colorScheme:getPolymerParam(name,"colorScheme"),colorScale:getPolymerParam(name,"colorScale")});}
for(var name in ligandReprDict){ligandReprDict[name].setParameters({colorScheme:getLigandParam(name,"colorScheme"),colorScale:getLigandParam(name,"colorScale")});}
signals.colorSchemeChanged.dispatch(colorScheme);}
function setModel(value){if(value!==model&&(model==="all"||value==="all")){model=value;initStructure();}else{model=value;updateSelections();}
signals.modelChanged.dispatch(model);}
function setHydrogenVisibility(value){hydrogenVisibility=value;updateSelections();signals.hydrogenVisibilityChanged.dispatch(hydrogenVisibility);}
function setIonVisibility(value){ionVisibility=value;updateSelections();signals.ionVisibilityChanged.dispatch(ionVisibility);}
function setWaterVisibility(value){waterVisibility=value;updateSelections();signals.waterVisibilityChanged.dispatch(waterVisibility);}
function setQuality(value){quality=value;console.log(quality)
polymerReprDict["surface"].setParameters({scaleFactor:getPolymerParam("surface","scaleFactor")});polymerReprDict["cartoon"].setParameters({subdiv:getPolymerParam("cartoon","subdiv"),radialSegments:getPolymerParam("cartoon","radialSegments")});polymerReprDict["backbone"].setParameters({lineOnly:getPolymerParam("backbone","lineOnly")});polymerReprDict["spacefill"].setParameters({sphereDetail:getPolymerParam("spacefill","sphereDetail"),});signals.qualityChanged.dispatch(quality);}
function getDefaultStyle(){if(atomCount<100000){return"cartoon";}else if(atomCount<1000000){return"backbone";}else{return"surface";}}
function getColorScale(){console.log(colorScheme)
if(colorScheme==="hydrophobicity"){return"RdYlGn";}else if(colorScheme==="bfactor"){return"OrRd";}else{return"RdYlBu";}}
function setAssembly(value){assembly=value;initStructure();signals.assemblyChanged.dispatch(assembly);}
function setSpin(value){spin=value;if(spin===true){stage.setSpin([0,1,0],0.005);}else if(value===false){stage.setSpin(null,null);}}
function getSymmetryInfo(){var data=symmetryData[assembly];if(data&&data.nrSymmetries){return data.symmetries[symmetry];}else{return undefined;}}
function updateSymmetry(){if(symmetryBuffer){symmetryBuffer.dispose();symmetryBuffer=undefined;}
var data=getSymmetryInfo();if(data&&data.symmetryAxes){symmetryBuffer=new SymmetryBuffer(data.symmetryAxes,{});symmetryBuffer.attach(structureComponent);}
if(data&&data.rotation&&data.center){var r=data.rotation;var m3=new NGL.Matrix3().set(parseFloat(r.m00),parseFloat(r.m01),parseFloat(r.m02),parseFloat(r.m10),parseFloat(r.m11),parseFloat(r.m12),parseFloat(r.m20),parseFloat(r.m21),parseFloat(r.m22));var c=new NGL.Vector3().copy(data.center);var v1=new NGL.Vector3(parseFloat(r.m00),parseFloat(r.m01),parseFloat(r.m02));var v2=new NGL.Vector3(parseFloat(r.m10),parseFloat(r.m11),parseFloat(r.m12));var v3=new NGL.Vector3(parseFloat(r.m20),parseFloat(r.m21),parseFloat(r.m22));stage.viewer.alignView(v3,v1,c,false);stage.viewer.centerView(true);}}
function setSymmetry(value){symmetry=parseInt(value)||0;var data=getSymmetryInfo();if(symmetry===-1){if(symmetryBuffer){symmetryBuffer.dispose();symmetryBuffer=undefined;}}else if(data===undefined){if(symmetryBuffer){symmetryBuffer.dispose();symmetryBuffer=undefined;}
loadSymmetryData(assembly).then(updateSymmetry);}else{updateSymmetry();}
signals.symmetryChanged.dispatch(symmetry);}
function centerView(){stage.centerView();}
function downloadScreenshot(){stage.makeImage({factor:2,antialias:true,trim:false,transparent:false}).then(function(blob){NGL.download(blob,pdbid+"_screenshot.png");});}
function toggleFullscreen(element){stage.toggleFullscreen(element);}
function getStyleNames(recommended){var styleDict={"":"None",backbone:"Backbone",surface:"Surface",};if(recommended){if(atomCount<100000){styleDict["cartoon"]="Cartoon";}
if(atomCount<80000){styleDict["spacefill"]="Spacefill";}
if(atomCount<80000){styleDict["licorice"]="Licorice";}}else{styleDict["cartoon"]="Cartoon";if(!isBackboneOnly){styleDict["spacefill"]="Spacefill";styleDict["licorice"]="Licorice";}}
return styleDict;}
function getLigandStyleNames(){return{"":"None","ball+stick":"Ball & Stick",spacefill:"Spacefill"};}
function getModelNames(){var modelDict={};if(structureComponent){var modelStore=structureComponent.structure.modelStore;if(modelStore.count>1){modelDict["all"]="All Models";}
for(var i=0;i<modelStore.count;++i){modelDict[i]="Model "+(i+1);}}
return modelDict;}
function getAssemblyNames(){var assemblyDict={};if(structureComponent){var structure=structureComponent.structure;var biomolDict=structure.biomolDict;if(!structure.unitcell&&Object.keys(biomolDict).length===1&&biomolDict["BU1"]&&biomolDict["BU1"].isIdentity(structure)){assemblyDict["BU1"]="Full Structure";}else{assemblyDict["__AU"]=(structure.unitcell?"Asymmetric Unit":"Full Structure");for(var name in biomolDict){if(name==="UNITCELL"){assemblyDict[name]="Unitcell";}else if(name==="SUPERCELL"){assemblyDict[name]="Supercell";}else if(name.substr(0,2)==="BU"){assemblyDict[name]="Bioassembly "+name.substr(2);}else{assemblyDict[name]=name;}}}}
return assemblyDict;}
function getColorSchemeNames(){return{chainname:"By Chain",residueindex:"Rainbow",element:"By Element",bfactor:"By B-factor",sstruc:"By Secondary Structure",hydrophobicity:"By Hydrophobicity"};}
function getSymmetryNames(){var symmetryDict={"-1":"None"};var data=symmetryData[assembly];if(data&&data.symmetries){for(var i=0;i<data.symmetries.length;++i){var sym=data.symmetries[i];var type=sym.local?"local":"global";if(sym.pseudoSymmetric){type+=", pseudo";}
symmetryDict[i]=sym.pointGroup+" ("+type+")";}}
return symmetryDict;}
this.signals=signals;this.loadPdbid=loadPdbid;this.centerView=centerView;this.downloadScreenshot=downloadScreenshot;this.toggleFullscreen=toggleFullscreen;this.setStyle=setStyle;this.setLigandStyle=setLigandStyle;this.setModel=setModel;this.setHydrogenVisibility=setHydrogenVisibility;this.setIonVisibility=setIonVisibility;this.setWaterVisibility=setWaterVisibility;this.setQuality=setQuality;this.setAssembly=setAssembly;this.setColorScheme=setColorScheme;this.setSpin=setSpin;this.setSymmetry=setSymmetry;this.getStyle=function(){return style;};this.getLigandStyle=function(){return ligandStyle;};this.getModel=function(){return model;};this.getHydrogenVisibility=function(){return hydrogenVisibility;};this.getIonVisibility=function(){return ionVisibility;};this.getWaterVisibility=function(){return waterVisibility;};this.getQuality=function(){return quality;};this.getAssembly=function(){return assembly;};this.getSymmetry=function(){return symmetry;};this.getColorScheme=function(){return colorScheme;};this.getSpin=function(){return spin;};this.getStyleNames=getStyleNames;this.getLigandStyleNames=getLigandStyleNames;this.getModelNames=getModelNames;this.getAssemblyNames=getAssemblyNames;this.getColorSchemeNames=getColorSchemeNames;this.getSymmetryNames=getSymmetryNames;};
